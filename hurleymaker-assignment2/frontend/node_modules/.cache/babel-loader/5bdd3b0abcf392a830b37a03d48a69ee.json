{"ast":null,"code":"import _slicedToArray from\"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";import axios from\"../../axios-orders\";import OrdersTable from\"../../components/OrdersTable/OrdersTable\";import Loader from\"../../components/Feedback/Loader/Loader\";import ErrorModal from\"../../components/Feedback/ErrorModal/ErrorModal\";import AuthContext from\"../../context/auth-context\";import{jsx as _jsx}from\"react/jsx-runtime\";var YourOrders=function YourOrders(props){var auth=useContext(AuthContext);// ORDER, ERROR AND LOADING STATE\nvar _useState=useState({orders:[]}),_useState2=_slicedToArray(_useState,2),pastOrdersState=_useState2[0],setPastOrdersState=_useState2[1];var _useState3=useState({error:false,errorMessage:null}),_useState4=_slicedToArray(_useState3,2),errorState=_useState4[0],setErrorState=_useState4[1];var _useState5=useState({isLoading:true,ordersLoaded:false,loadFailed:false}),_useState6=_slicedToArray(_useState5,2),loadingState=_useState6[0],setLoadingState=_useState6[1];// FETCH ORDERS\nuseEffect(function(){var uid=auth.userId;var path=\"/orders/\"+uid;axios.get(path,{headers:{Authorization:\"Bearer \"+auth.token}}).then(function(response){setPastOrdersState({orders:response.data.orders});setLoadingState({isLoading:false,ordersLoaded:true,loadFailed:loadingState.loadFailed});}).catch(function(error){setErrorState({error:true,errorMessage:error.response.data.message});setLoadingState({isLoading:false,ordersLoaded:loadingState.ordersLoaded,loadFailed:loadingState.loadFailed});});},[]);// ERROR HANDLER\nvar errorHandler=function errorHandler(){setErrorState({error:false,errorMessage:null});setLoadingState({isLoading:loadingState.isLoading,ordersLoaded:loadingState.ordersLoaded,loadFailed:true});};// DISPLAY ORDERS\nvar orders=errorState.error?/*#__PURE__*/_jsx(ErrorModal,{error:errorState.errorMessage,onClear:errorHandler}):/*#__PURE__*/_jsx(Loader,{active:loadingState.isLoading});if(loadingState.ordersLoaded&&pastOrdersState.orders.length>0){orders=/*#__PURE__*/_jsx(OrdersTable,{orders:pastOrdersState.orders});}else if(loadingState.loadFailed){orders=/*#__PURE__*/_jsx(\"p\",{children:\"We can't load your orders... maybe try creating one?\"});}return/*#__PURE__*/_jsx(\"div\",{children:orders});};export default YourOrders;","map":{"version":3,"sources":["/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/YourOrders/YourOrders.js"],"names":["React","useState","useEffect","useContext","axios","OrdersTable","Loader","ErrorModal","AuthContext","YourOrders","props","auth","orders","pastOrdersState","setPastOrdersState","error","errorMessage","errorState","setErrorState","isLoading","ordersLoaded","loadFailed","loadingState","setLoadingState","uid","userId","path","get","headers","Authorization","token","then","response","data","catch","message","errorHandler","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"../../axios-orders\";\r\n\r\nimport OrdersTable from \"../../components/OrdersTable/OrdersTable\";\r\nimport Loader from \"../../components/Feedback/Loader/Loader\";\r\nimport ErrorModal from \"../../components/Feedback/ErrorModal/ErrorModal\";\r\nimport AuthContext from \"../../context/auth-context\";\r\n\r\nconst YourOrders = (props) => {\r\n\r\n  const auth = useContext(AuthContext);\r\n\r\n  // ORDER, ERROR AND LOADING STATE\r\n\r\n  const [pastOrdersState, setPastOrdersState] = useState({\r\n    orders: [],\r\n  });\r\n\r\n  const [errorState, setErrorState] = useState({\r\n    error: false,\r\n    errorMessage: null,\r\n  });\r\n\r\n  const [loadingState, setLoadingState] = useState({\r\n    isLoading: true,\r\n    ordersLoaded: false,\r\n    loadFailed: false,\r\n  });\r\n\r\n  // FETCH ORDERS\r\n  \r\n  useEffect(() => {\r\n\r\n    let uid = auth.userId;\r\n    let path = \"/orders/\" + uid;\r\n    axios\r\n      .get(path, { headers: { Authorization: \"Bearer \" + auth.token }})\r\n      .then((response) => {\r\n        setPastOrdersState({ orders: response.data.orders });\r\n        setLoadingState({\r\n          isLoading: false,\r\n          ordersLoaded: true,\r\n          loadFailed: loadingState.loadFailed,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        setErrorState({\r\n          error: true,\r\n          errorMessage: error.response.data.message,\r\n        });\r\n        setLoadingState({\r\n          isLoading: false,\r\n          ordersLoaded: loadingState.ordersLoaded,\r\n          loadFailed: loadingState.loadFailed,\r\n        });\r\n      });\r\n  }, []);\r\n\r\n  // ERROR HANDLER\r\n\r\n  const errorHandler = () => {\r\n    setErrorState({\r\n      error: false,\r\n      errorMessage: null,\r\n    });\r\n    setLoadingState({\r\n      isLoading: loadingState.isLoading,\r\n      ordersLoaded: loadingState.ordersLoaded,\r\n      loadFailed: true,\r\n    });\r\n  };\r\n\r\n  // DISPLAY ORDERS\r\n\r\n  let orders = errorState.error ? (\r\n    <ErrorModal error={errorState.errorMessage} onClear={errorHandler} />\r\n  ) : (\r\n    <Loader active={loadingState.isLoading} />\r\n  );\r\n\r\n  if (loadingState.ordersLoaded && pastOrdersState.orders.length > 0) {\r\n    orders = <OrdersTable orders={pastOrdersState.orders} />;\r\n  } else if (loadingState.loadFailed) {\r\n    orders = <p>We can't load your orders... maybe try creating one?</p>;\r\n  }\r\n\r\n  return <div>{orders}</div>;\r\n};\r\n\r\nexport default YourOrders;\r\n"]},"metadata":{},"sourceType":"module"}