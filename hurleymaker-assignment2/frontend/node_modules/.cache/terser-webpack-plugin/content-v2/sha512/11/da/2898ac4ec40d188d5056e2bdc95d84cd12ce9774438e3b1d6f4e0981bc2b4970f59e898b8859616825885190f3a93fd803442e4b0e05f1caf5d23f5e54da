{"code":"(this.webpackJsonphurleymaker=this.webpackJsonphurleymaker||[]).push([[8],{227:function(e,r,a){\"use strict\";a.r(r);var s=a(96),t=a(20),l=a(0),n=a.n(l),i=a(210),u=a(195),o=a(104),d=a(230),m=a(194),c=a(107),p=a(108),f=a(51),b=a(2);r.default=function(e){var r=Object(l.useContext)(f.a),a=Object(l.useState)({user:e.history.location.state.user}),h=Object(t.a)(a,2),j=h[0],g=h[1],v=Object(l.useState)({error:!1,errorMessage:null}),O=Object(t.a)(v,2),w=O[0],x=O[1],k=Object(l.useState)({rules:[{id:\"form-input-name\",message:\"Please enter your name (letters and spaces only, min length 2)\",required:!0,valid:!1},{id:\"form-input-email\",message:\"Please enter a valid email address (something@something.something)\",required:!0,valid:!1},{id:\"form-input-password\",message:\"Please enter a password (letters and numbers only, min length 6)\",required:!0,valid:!1}],formValid:!1}),y=Object(t.a)(k,2),C=y[0],q=y[1],I=Object(l.useState)({name:null,email:null,address:null}),P=Object(t.a)(I,2),A=P[0],M=P[1],S=function(e,r){var a=Object(s.a)({},C),t=a.rules.findIndex((function(e){return e.id===r})),l=null;if(a.rules[t].required&&\"\"===e.trim())l=a.rules[t].message,a.rules[t].valid=!1;else if(\"form-input-email\"===r){/^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/.test(e)?a.rules[t].valid=!0:(a.rules[t].valid=!1,l=a.rules[t].message)}else if(\"form-input-password\"===r){/^[A-Za-z0-9\\s]{6,}$/.test(e)?a.rules[t].valid=!0:(a.rules[t].valid=!1,l=a.rules[t].message)}else if(a.rules[t].required&&\"form-input-name\"===r){/^[A-Za-z\\s]{2,30}$/.test(e)?a.rules[t].valid=!0:(a.rules[t].valid=!1,l=a.rules[t].message)}else l=null,a.rules[t].valid=!0;var n=Object(s.a)({},A);switch(r){case\"form-input-name\":n.name=l;break;case\"form-input-email\":n.email=l;break;case\"form-input-password\":n.password=l}M(Object(s.a)({},n));var i=!0;for(var u in a.rules)a.rules[u].valid||(i=!1);q({rules:a.rules,formValid:i})},z=function(e,r){var a=j.user;switch(r){case\"form-input-name\":a.name=e.target.value,S(e.target.value,r);break;case\"form-input-email\":a.email=e.target.value,S(e.target.value,r);break;case\"form-input-password\":var s=e.target.value.trim();a.password=s,S(s,r)}g({user:a})},V=!C.formValid,$=null;return $=w.error?Object(b.jsx)(p.a,{error:w.errorMessage,onClear:function(){x({error:!1,errorMessage:null})}}):Object(b.jsx)(i.a,{children:Object(b.jsx)(i.a.Row,{centered:!0,children:Object(b.jsx)(i.a.Column,{width:10,children:Object(b.jsxs)(u.a,{color:\"red\",children:[Object(b.jsx)(o.a,{as:\"h2\",textAlign:\"center\",color:\"red\",children:\"Update Your Details\"}),Object(b.jsxs)(d.a,{id:\"form\",children:[Object(b.jsx)(d.a.Input,{error:A.email,autoComplete:\"off\",required:!0,label:\"Email\",placeholder:\"Email e.g. username@mail.com\",id:\"form-input-email\",onChange:function(e){return z(e,\"form-input-email\")}}),Object(b.jsx)(d.a.Input,{error:A.password,type:\"password\",autoComplete:\"off\",required:!0,label:\"Password\",placeholder:\"Password\",id:\"form-input-password\",onChange:function(e){return z(e,\"form-input-password\")}}),Object(b.jsx)(d.a.Input,{error:A.name,autoComplete:\"off\",required:!0,label:\"Name\",placeholder:\"Name\",id:\"form-input-name\",onChange:function(e){return z(e,\"form-input-name\")}}),Object(b.jsx)(m.a,{type:\"submit\",color:\"green\",disabled:V,onClick:function(){var a=\"/updateuser/\"+r.userId;c.a.put(a,j.user,{headers:{Authorization:\"Bearer \"+r.token}}).then((function(a){e.history.push(\"/users/\"+r.userId)})).catch((function(e){var r=\"\";r=e.response?e.response.data.message:\"There was a problem updating your account\",x({error:!0,errorMessage:r})}))},children:\"Update Details\"})]})]})})})}),Object(b.jsx)(n.a.Fragment,{children:$})}}}]);","name":"static/js/8.8fc0bca9.chunk.js","map":{"version":3,"sources":["static/js/8.8fc0bca9.chunk.js"],"names":["this","push","227","module","__webpack_exports__","__webpack_require__","r","_Users_BrienOShane93_Documents_GitHub_react_intro_hurleymaker_assignment2_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__","_Users_BrienOShane93_Documents_GitHub_react_intro_hurleymaker_assignment2_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_2___default","n","semantic_ui_react__WEBPACK_IMPORTED_MODULE_3__","semantic_ui_react__WEBPACK_IMPORTED_MODULE_4__","semantic_ui_react__WEBPACK_IMPORTED_MODULE_5__","semantic_ui_react__WEBPACK_IMPORTED_MODULE_6__","semantic_ui_react__WEBPACK_IMPORTED_MODULE_7__","_axios_orders__WEBPACK_IMPORTED_MODULE_8__","_components_Feedback_ErrorModal_ErrorModal__WEBPACK_IMPORTED_MODULE_9__","_context_auth_context__WEBPACK_IMPORTED_MODULE_10__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__","props","auth","Object","_useState","user","history","location","state","_useState2","accountState","setAccountState","_useState3","error","errorMessage","_useState4","errorState","setErrorState","_useState5","rules","id","message","required","valid","formValid","_useState6","validationState","setValidationState","_useState7","name","email","address","_useState8","messageState","setMessageState","validate","value","inputIdentifier","validation","inputRule","findIndex","input","trim","test","msgState","password","formIsValid","i","formChangedHandler","event","userDetails","target","trimmedPassword","disabled","updateForm","onClear","children","Row","centered","Column","width","color","as","textAlign","Input","autoComplete","label","placeholder","onChange","type","onClick","path","userId","put","headers","Authorization","token","then","response","catch","errorMsg","data","a","Fragment"],"mappings":"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"},"input":"(this[\"webpackJsonphurleymaker\"] = this[\"webpackJsonphurleymaker\"] || []).push([[8],{\n\n/***/ 227:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Users_BrienOShane93_Documents_GitHub_react_intro_hurleymaker_assignment2_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96);\n/* harmony import */ var _Users_BrienOShane93_Documents_GitHub_react_intro_hurleymaker_assignment2_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(20);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var semantic_ui_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(210);\n/* harmony import */ var semantic_ui_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(195);\n/* harmony import */ var semantic_ui_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(104);\n/* harmony import */ var semantic_ui_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(230);\n/* harmony import */ var semantic_ui_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(194);\n/* harmony import */ var _axios_orders__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(107);\n/* harmony import */ var _components_Feedback_ErrorModal_ErrorModal__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(108);\n/* harmony import */ var _context_auth_context__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(51);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(2);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__);\nvar AccountUpdate=function AccountUpdate(props){var auth=Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useContext\"])(_context_auth_context__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"]);var _useState=Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])({user:props.history.location.state.user}),_useState2=Object(_Users_BrienOShane93_Documents_GitHub_react_intro_hurleymaker_assignment2_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(_useState,2),accountState=_useState2[0],setAccountState=_useState2[1];var _useState3=Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])({error:false,errorMessage:null}),_useState4=Object(_Users_BrienOShane93_Documents_GitHub_react_intro_hurleymaker_assignment2_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(_useState3,2),errorState=_useState4[0],setErrorState=_useState4[1];var _useState5=Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])({rules:[{id:\"form-input-name\",message:\"Please enter your name (letters and spaces only, min length 2)\",required:true,valid:false},{id:\"form-input-email\",message:\"Please enter a valid email address (something@something.something)\",required:true,valid:false},{id:\"form-input-password\",message:\"Please enter a password (letters and numbers only, min length 6)\",required:true,valid:false}],formValid:false}),_useState6=Object(_Users_BrienOShane93_Documents_GitHub_react_intro_hurleymaker_assignment2_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(_useState5,2),validationState=_useState6[0],setValidationState=_useState6[1];var _useState7=Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])({name:null,email:null,address:null}),_useState8=Object(_Users_BrienOShane93_Documents_GitHub_react_intro_hurleymaker_assignment2_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(_useState7,2),messageState=_useState8[0],setMessageState=_useState8[1];var validate=function validate(value,inputIdentifier){// copy the validation state\nvar validation=Object(_Users_BrienOShane93_Documents_GitHub_react_intro_hurleymaker_assignment2_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({},validationState);// find the rule for this input\nvar inputRule=validation.rules.findIndex(function(input){return input.id===inputIdentifier;});var message=null;// check if it is required and also empty\nif(validation.rules[inputRule].required&&value.trim()===\"\"){// get the error message and set valid to false\nmessage=validation.rules[inputRule].message;validation.rules[inputRule].valid=false;}else if(inputIdentifier===\"form-input-email\"){//check for a valid email\nvar pattern=/^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/;var validEmail=pattern.test(value);if(validEmail){validation.rules[inputRule].valid=true;}else{validation.rules[inputRule].valid=false;message=validation.rules[inputRule].message;}}else if(inputIdentifier===\"form-input-password\"){//check for a valid password, letters and numbers only, 6 characters min\nvar _pattern=/^[A-Za-z0-9\\s]{6,}$/;var validPassword=_pattern.test(value);if(validPassword){validation.rules[inputRule].valid=true;}else{validation.rules[inputRule].valid=false;message=validation.rules[inputRule].message;}}else if(validation.rules[inputRule].required&&inputIdentifier===\"form-input-name\"){//check for a valid name (letters and spaces only)\nvar _pattern2=/^[A-Za-z\\s]{2,30}$/;var validName=_pattern2.test(value);if(validName){validation.rules[inputRule].valid=true;}else{validation.rules[inputRule].valid=false;message=validation.rules[inputRule].message;}}else{// otherwise reset the message and set valid back to true\nmessage=null;validation.rules[inputRule].valid=true;}var msgState=Object(_Users_BrienOShane93_Documents_GitHub_react_intro_hurleymaker_assignment2_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({},messageState);switch(inputIdentifier){case\"form-input-name\":msgState.name=message;break;case\"form-input-email\":msgState.email=message;break;case\"form-input-password\":msgState.password=message;break;default:// code block\n}setMessageState(Object(_Users_BrienOShane93_Documents_GitHub_react_intro_hurleymaker_assignment2_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])({},msgState));// check if the whole form is valid\nvar formIsValid=true;for(var i in validation.rules){if(!validation.rules[i].valid){formIsValid=false;}}// update state\nsetValidationState({rules:validation.rules,formValid:formIsValid});};var formChangedHandler=function formChangedHandler(event,inputIdentifier){var userDetails=accountState.user;switch(inputIdentifier){case\"form-input-name\":userDetails.name=event.target.value;validate(event.target.value,inputIdentifier);break;case\"form-input-email\":userDetails.email=event.target.value;validate(event.target.value,inputIdentifier);break;case\"form-input-password\":var password=event.target.value;var trimmedPassword=password.trim();userDetails.password=trimmedPassword;validate(trimmedPassword,inputIdentifier);break;default:// code block\n}setAccountState({user:userDetails});};var updateHandler=function updateHandler(){var uid=auth.userId;var path=\"/updateuser/\"+uid;_axios_orders__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"].put(path,accountState.user,{headers:{Authorization:\"Bearer \"+auth.token}}).then(function(response){props.history.push(\"/users/\"+auth.userId);}).catch(function(error){var errorMsg=\"\";if(error.response){errorMsg=error.response.data.message;}else{errorMsg=\"There was a problem updating your account\";}setErrorState({error:true,errorMessage:errorMsg});});};var disabled=!validationState.formValid;var errorHandler=function errorHandler(){setErrorState({error:false,errorMessage:null});};var updateForm=null;if(errorState.error){updateForm=/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsx\"])(_components_Feedback_ErrorModal_ErrorModal__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"],{error:errorState.errorMessage,onClear:errorHandler});}else{updateForm=/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsx\"])(semantic_ui_react__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"],{children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsx\"])(semantic_ui_react__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].Row,{centered:true,children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsx\"])(semantic_ui_react__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].Column,{width:10,children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsxs\"])(semantic_ui_react__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"],{color:\"red\",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsx\"])(semantic_ui_react__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"],{as:\"h2\",textAlign:\"center\",color:\"red\",children:\"Update Your Details\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsxs\"])(semantic_ui_react__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"],{id:\"form\",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsx\"])(semantic_ui_react__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"].Input,{error:messageState.email,autoComplete:\"off\",required:true,label:\"Email\",placeholder:\"Email e.g. username@mail.com\",id:\"form-input-email\",onChange:function onChange(event){return formChangedHandler(event,\"form-input-email\");}}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsx\"])(semantic_ui_react__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"].Input,{error:messageState.password,type:\"password\",autoComplete:\"off\",required:true,label:\"Password\",placeholder:\"Password\",id:\"form-input-password\",onChange:function onChange(event){return formChangedHandler(event,\"form-input-password\");}}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsx\"])(semantic_ui_react__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"].Input,{error:messageState.name,autoComplete:\"off\",required:true,label:\"Name\",placeholder:\"Name\",id:\"form-input-name\",onChange:function onChange(event){return formChangedHandler(event,\"form-input-name\");}}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsx\"])(semantic_ui_react__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"],{type:\"submit\",color:\"green\",disabled:disabled,onClick:updateHandler,children:\"Update Details\"})]})]})})})});}return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsx\"])(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment,{children:updateForm});};/* harmony default export */ __webpack_exports__[\"default\"] = (AccountUpdate);\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/YourAccount/AccountUpdate/AccountUpdate.js"],"names":["AccountUpdate","props","auth","useContext","AuthContext","useState","user","history","location","state","accountState","setAccountState","error","errorMessage","errorState","setErrorState","rules","id","message","required","valid","formValid","validationState","setValidationState","name","email","address","messageState","setMessageState","validate","value","inputIdentifier","validation","inputRule","findIndex","input","trim","pattern","validEmail","test","validPassword","validName","msgState","password","formIsValid","i","formChangedHandler","event","userDetails","target","trimmedPassword","updateHandler","uid","userId","path","axios","put","headers","Authorization","token","then","response","push","catch","errorMsg","data","disabled","errorHandler","updateForm"],"mappings":"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","file":"x","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { Grid, Form, Header, Segment, Button } from \"semantic-ui-react\";\r\nimport axios from \"../../../axios-orders\";\r\n\r\nimport ErrorModal from \"../../../components/Feedback/ErrorModal/ErrorModal\";\r\nimport AuthContext from \"../../../context/auth-context\";\r\n\r\nconst AccountUpdate = (props) => {\r\n\r\n  const auth = useContext(AuthContext);\r\n\r\n  const [accountState, setAccountState] = useState({\r\n    user: props.history.location.state.user,\r\n  });\r\n\r\n  const [errorState, setErrorState] = useState({\r\n    error: false,\r\n    errorMessage: null,\r\n  });\r\n\r\n  const [validationState, setValidationState] = useState({\r\n    rules: [\r\n      {\r\n        id: \"form-input-name\",\r\n        message:\r\n          \"Please enter your name (letters and spaces only, min length 2)\",\r\n        required: true,\r\n        valid: false,\r\n      },\r\n      {\r\n        id: \"form-input-email\",\r\n        message:\r\n          \"Please enter a valid email address (something@something.something)\",\r\n        required: true,\r\n        valid: false,\r\n      },\r\n      {\r\n        id: \"form-input-password\",\r\n        message:\r\n          \"Please enter a password (letters and numbers only, min length 6)\",\r\n        required: true,\r\n        valid: false,\r\n      },\r\n    ],\r\n    formValid: false,\r\n  });\r\n\r\n  const [messageState, setMessageState] = useState({\r\n    name: null,\r\n    email: null,\r\n    address: null,\r\n  });\r\n\r\n  const validate = (value, inputIdentifier) => {\r\n    // copy the validation state\r\n    const validation = { ...validationState };\r\n\r\n    // find the rule for this input\r\n    const inputRule = validation.rules.findIndex(\r\n      (input) => input.id === inputIdentifier\r\n    );\r\n\r\n    let message = null;\r\n\r\n    // check if it is required and also empty\r\n    if (validation.rules[inputRule].required && value.trim() === \"\") {\r\n      // get the error message and set valid to false\r\n      message = validation.rules[inputRule].message;\r\n      validation.rules[inputRule].valid = false;\r\n    } else if (inputIdentifier === \"form-input-email\") {\r\n      //check for a valid email\r\n\r\n      let pattern = /^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/;\r\n      let validEmail = pattern.test(value);\r\n\r\n      if (validEmail) {\r\n        validation.rules[inputRule].valid = true;\r\n      } else {\r\n        validation.rules[inputRule].valid = false;\r\n        message = validation.rules[inputRule].message;\r\n      }\r\n    } else if (inputIdentifier === \"form-input-password\") {\r\n      //check for a valid password, letters and numbers only, 6 characters min\r\n\r\n      let pattern = /^[A-Za-z0-9\\s]{6,}$/;\r\n      let validPassword = pattern.test(value);\r\n\r\n      if (validPassword) {\r\n        validation.rules[inputRule].valid = true;\r\n      } else {\r\n        validation.rules[inputRule].valid = false;\r\n        message = validation.rules[inputRule].message;\r\n      }\r\n    } else if (\r\n      validation.rules[inputRule].required &&\r\n      inputIdentifier === \"form-input-name\"\r\n    ) {\r\n      //check for a valid name (letters and spaces only)\r\n\r\n      let pattern = /^[A-Za-z\\s]{2,30}$/;\r\n      let validName = pattern.test(value);\r\n\r\n      if (validName) {\r\n        validation.rules[inputRule].valid = true;\r\n      } else {\r\n        validation.rules[inputRule].valid = false;\r\n        message = validation.rules[inputRule].message;\r\n      }\r\n    } else {\r\n      // otherwise reset the message and set valid back to true\r\n      message = null;\r\n      validation.rules[inputRule].valid = true;\r\n    }\r\n\r\n    let msgState = { ...messageState };\r\n\r\n    switch (inputIdentifier) {\r\n      case \"form-input-name\":\r\n        msgState.name = message;\r\n        break;\r\n      case \"form-input-email\":\r\n        msgState.email = message;\r\n        break;\r\n      case \"form-input-password\":\r\n        msgState.password = message;\r\n        break;\r\n      default:\r\n      // code block\r\n    }\r\n\r\n    setMessageState({ ...msgState });\r\n\r\n    // check if the whole form is valid\r\n    let formIsValid = true;\r\n\r\n    for (let i in validation.rules) {\r\n      if (!validation.rules[i].valid) {\r\n        formIsValid = false;\r\n      }\r\n    }\r\n\r\n    // update state\r\n    setValidationState({ rules: validation.rules, formValid: formIsValid });\r\n  };\r\n\r\n  const formChangedHandler = (event, inputIdentifier) => {\r\n    let userDetails = accountState.user;\r\n\r\n    switch (inputIdentifier) {\r\n      case \"form-input-name\":\r\n        userDetails.name = event.target.value;\r\n        validate(event.target.value, inputIdentifier);\r\n        break;\r\n      case \"form-input-email\":\r\n        userDetails.email = event.target.value;\r\n        validate(event.target.value, inputIdentifier);\r\n        break;\r\n      case \"form-input-password\":\r\n        let password = event.target.value;\r\n        let trimmedPassword = password.trim();\r\n        userDetails.password = trimmedPassword;\r\n        validate(trimmedPassword, inputIdentifier);\r\n        break;\r\n      default:\r\n      // code block\r\n    }\r\n\r\n    setAccountState({ user: userDetails });\r\n  };\r\n\r\n  const updateHandler = () => {\r\n    let uid = auth.userId;\r\n    let path = \"/updateuser/\" + uid;\r\n    axios\r\n      .put(path, accountState.user, {\r\n        headers: { Authorization: \"Bearer \" + auth.token },\r\n      })\r\n      .then((response) => {\r\n        props.history.push(\"/users/\" + auth.userId);\r\n      })\r\n      .catch((error) => {\r\n        let errorMsg = \"\";\r\n        if (error.response) {\r\n          errorMsg = error.response.data.message;\r\n        } else {\r\n          errorMsg = \"There was a problem updating your account\";\r\n        }\r\n        setErrorState({ error: true, errorMessage: errorMsg });\r\n      });\r\n  };\r\n\r\n  let disabled = !validationState.formValid;\r\n\r\n  const errorHandler = () => {\r\n    setErrorState({\r\n      error: false,\r\n      errorMessage: null,\r\n    });\r\n  };\r\n\r\n  let updateForm = null;\r\n\r\n  if (errorState.error) {\r\n    updateForm = (\r\n      <ErrorModal error={errorState.errorMessage} onClear={errorHandler} />\r\n    );\r\n  } else {\r\n    updateForm = (\r\n      <Grid>\r\n        <Grid.Row centered>\r\n          <Grid.Column width={10}>\r\n            <Segment color=\"red\">\r\n              <Header as=\"h2\" textAlign=\"center\" color=\"red\">\r\n                Update Your Details\r\n              </Header>\r\n              <Form id=\"form\">\r\n                <Form.Input\r\n                  error={messageState.email}\r\n                  autoComplete=\"off\"\r\n                  required\r\n                  label=\"Email\"\r\n                  placeholder=\"Email e.g. username@mail.com\"\r\n                  id=\"form-input-email\"\r\n                  onChange={(event) =>\r\n                    formChangedHandler(event, \"form-input-email\")\r\n                  }\r\n                />\r\n                <Form.Input\r\n                  error={messageState.password}\r\n                  type=\"password\"\r\n                  autoComplete=\"off\"\r\n                  required\r\n                  label=\"Password\"\r\n                  placeholder=\"Password\"\r\n                  id=\"form-input-password\"\r\n                  onChange={(event) =>\r\n                    formChangedHandler(event, \"form-input-password\")\r\n                  }\r\n                />\r\n                <Form.Input\r\n                  error={messageState.name}\r\n                  autoComplete=\"off\"\r\n                  required\r\n                  label=\"Name\"\r\n                  placeholder=\"Name\"\r\n                  id=\"form-input-name\"\r\n                  onChange={(event) =>\r\n                    formChangedHandler(event, \"form-input-name\")\r\n                  }\r\n                />\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"green\"\r\n                  disabled={disabled}\r\n                  onClick={updateHandler}\r\n                >\r\n                  Update Details\r\n                </Button>\r\n              </Form>\r\n            </Segment>\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n    );\r\n  }\r\n\r\n  return <React.Fragment>{updateForm}</React.Fragment>;\r\n};\r\n\r\nexport default AccountUpdate;\r\n"]}}