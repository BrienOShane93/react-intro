{"code":"(this.webpackJsonphurleymaker=this.webpackJsonphurleymaker||[]).push([[7],{232:function(e,r,t){\"use strict\";t.r(r);var a,n=t(96),o=t(20),s=t(0),i=t.n(s),l=t(210),u=t(195),d=t(104),c=t(194),m=t(230),p=t(224),h=t(10),f=new Uint8Array(16);function b(){if(!a&&!(a=\"undefined\"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||\"undefined\"!==typeof msCrypto&&\"function\"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");return a(f)}var v=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var j=function(e){return\"string\"===typeof e&&v.test(e)},g=[],y=0;y<256;++y)g.push((y+256).toString(16).substr(1));var O=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(g[e[r+0]]+g[e[r+1]]+g[e[r+2]]+g[e[r+3]]+\"-\"+g[e[r+4]]+g[e[r+5]]+\"-\"+g[e[r+6]]+g[e[r+7]]+\"-\"+g[e[r+8]]+g[e[r+9]]+\"-\"+g[e[r+10]]+g[e[r+11]]+g[e[r+12]]+g[e[r+13]]+g[e[r+14]]+g[e[r+15]]).toLowerCase();if(!j(t))throw TypeError(\"Stringified UUID is invalid\");return t};var x=function(e,r,t){var a=(e=e||{}).random||(e.rng||b)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,r){t=t||0;for(var n=0;n<16;++n)r[t+n]=a[n];return r}return O(a)},C=t(107),k=t(51),S=t(76),w=t(108),q=t(2);r.default=Object(h.g)((function(e){var r=Object(s.useContext)(k.a),t=Object(s.useState)({totalPrice:e.location.state.order.totalPrice,chosenStyles:e.location.state.order.chosenStyles}),a=Object(o.a)(t,2),h=a[0],f=(a[1],Object(s.useState)({error:!1,errorMessage:null})),b=Object(o.a)(f,2),v=b[0],j=b[1],g=Object(s.useState)({details:{name:\"\",phone:\"\",method:\"\",address:\"\"}}),y=Object(o.a)(g,2),O=y[0],A=y[1],D=Object(s.useState)({rules:[{id:\"form-input-name\",message:\"Please enter your name (letters and spaces only, min length 2)\",required:!0,valid:!1},{id:\"form-input-phone\",message:\"Please enter your phone number (area code and number)\",required:!0,valid:!1},{id:\"form-input-method\",message:\"Please choose collection or delivery\",required:!0,valid:!1},{id:\"form-input-address\",message:\"Please enter your delivery address (house number and street)\",required:!1,valid:!0}],formValid:!1}),P=Object(o.a)(D,2),M=P[0],V=P[1],I=Object(s.useState)({name:null,phone:null,method:null,address:null}),R=Object(o.a)(I,2),F=R[0],J=R[1],T=function(e,r,t){var a=Object(n.a)({},M),o=a.rules.findIndex((function(e){return e.id===r})),s=null;if(a.rules[o].required&&\"input\"===t&&\"\"===e.trim())s=a.rules[o].message,a.rules[o].valid=!1;else if(\"form-input-phone\"===r){/^[+]?[(]?[0-9]{3,5}[)]?[-\\s.]?[0-9]{6,7}$/.test(e)?a.rules[o].valid=!0:(a.rules[o].valid=!1,s=a.rules[o].message)}else if(\"form-input-name\"===r){/^[A-Za-z\\s]{2,30}$/.test(e)?a.rules[o].valid=!0:(a.rules[o].valid=!1,s=a.rules[o].message)}else if(\"Delivery\"===e)a.rules[o].valid=!0,a.rules[3].valid=!1,a.rules[3].required=!0;else if(\"Collection\"===e)a.rules[o].valid=!0,a.rules[3].required=!1,a.rules[3].valid=!0;else if(a.rules[o].required&&\"form-input-address\"===r){/^[#.0-9a-zA-Z\\s,-]{2,50}$/.test(e)?a.rules[o].valid=!0:(a.rules[o].valid=!1,s=a.rules[o].message)}else s=null,a.rules[o].valid=!0;var i=Object(n.a)({},F);switch(r){case\"form-input-name\":i.name=s;break;case\"form-input-phone\":i.phone=s;break;case\"form-input-method\":i.method=s;break;case\"form-input-address\":i.address=s}J(Object(n.a)({},i));var l=!0;for(var u in a.rules)a.rules[u].valid||(l=!1);V({rules:a.rules,formValid:l})},$=function(e,r,t){var a=O.details;switch(r){case\"form-input-name\":a.name=e.target.value,T(e.target.value,r,t);break;case\"form-input-phone\":a.phone=e.target.value,T(e.target.value,r,t);break;case\"form-input-method\":a.method=e.target.textContent,T(e.target.textContent,r,t);break;case\"form-input-address\":a.address=e.target.value,T(e.target.value,r,t)}A({details:a})},z=!M.formValid,E=null;return E=v.error?Object(q.jsx)(w.a,{error:v.errorMessage,onClear:function(){j({error:!1,errorMessage:null})}}):Object(q.jsx)(l.a,{children:Object(q.jsxs)(l.a.Row,{columns:2,children:[Object(q.jsx)(l.a.Column,{width:6,children:Object(q.jsxs)(u.a,{color:\"red\",children:[Object(q.jsx)(d.a,{as:\"h2\",textAlign:\"center\",color:\"red\",children:\"Confirm your order:\"}),Object(q.jsx)(S.a,{menu:e.location.state.menu,toppings:e.location.state.order.chosenStyles,price:e.location.state.order.totalPrice}),Object(q.jsx)(c.a,{color:\"red\",onClick:function(){e.history.push({pathname:\"/\",state:{order:h}})},children:\"Go Back\"})]})}),Object(q.jsx)(l.a.Column,{width:10,children:Object(q.jsxs)(u.a,{color:\"red\",children:[Object(q.jsx)(d.a,{as:\"h2\",textAlign:\"center\",color:\"red\",children:\"Enter your details:\"}),Object(q.jsxs)(m.a,{id:\"form\",children:[Object(q.jsx)(m.a.Input,{error:F.name,required:!0,label:\"Name\",placeholder:\"Name\",id:\"form-input-name\",onChange:function(e){return $(e,\"form-input-name\",\"input\")}}),Object(q.jsx)(m.a.Input,{error:F.phone,required:!0,label:\"Phone\",placeholder:\"Phone e.g. 086-1234567\",id:\"form-input-phone\",onChange:function(e){return $(e,\"form-input-phone\",\"input\")}}),Object(q.jsx)(m.a.Field,{control:p.a,required:!0,error:F.method,label:\"Delivery method\",options:[{key:\"c\",text:\"Collection\",value:\"collection\"},{key:\"d\",text:\"Delivery\",value:\"delivery\"}],placeholder:\"Collection or Delivery\",id:\"form-input-method\",onChange:function(e){return $(e,\"form-input-method\",\"select\")}}),Object(q.jsx)(m.a.Input,{error:F.address,required:M.rules[3].required,fluid:!0,label:\"Address\",placeholder:\"Address\",id:\"form-input-address\",onChange:function(e){return $(e,\"form-input-address\",\"input\")}}),Object(q.jsx)(c.a,{type:\"submit\",color:\"green\",disabled:z,onClick:function(){var t=h;t.id=x();var a=new Date,n=[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"][a.getDay()],o=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"][a.getMonth()],s=n+\" \"+a.getDate()+\" \"+o+\" \"+a.getFullYear();t.date=s,t.details=O.details,t.userId=r.userId,C.a.post(\"/checkout\",t,{headers:{Authorization:\"Bearer \"+r.token}}).then((function(r){e.history.push(\"/order-success\")})).catch((function(e){var r=\"\";r=e.response?e.response.data.message:\"There was a problem creating your order\",j({error:!0,errorMessage:r})}))},children:\"Submit\"})]})]})})]})}),Object(q.jsx)(i.a.Fragment,{children:E})}))}}]);","name":"static/js/7.092cd0c4.chunk.js","map":{"version":3,"sources":["static/js/7.092cd0c4.chunk.js"],"names":["this","push","232","module","__webpack_exports__","__webpack_require__","r","getRandomValues","objectSpread2","slicedToArray","react","react_default","n","Grid","Segment","Header","Button","Form","Select","react_router","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","regex","esm_browser_validate","uuid","test","byteToHex","stringify_i","toString","substr","esm_browser_stringify","arr","offset","arguments","length","undefined","toLowerCase","TypeError","esm_browser_v4","options","buf","rnds","random","i","axios_orders","auth_context","OrderSummary","ErrorModal","jsx_runtime","Object","props","auth","_useState","totalPrice","location","state","order","chosenStyles","_useState2","orderState","_useState3","error","errorMessage","_useState4","errorState","setErrorState","_useState5","details","name","phone","method","address","_useState6","customerState","setCustomerState","_useState7","rules","id","message","required","valid","formValid","_useState8","validationState","setValidationState","_useState9","_useState10","messageState","setMessageState","validate","value","inputIdentifier","inputType","validation","inputRule","findIndex","input","trim","msgState","formIsValid","formChangedHandler","event","customerDetails","target","textContent","disabled","orderForm","onClear","children","Row","columns","Column","width","color","as","textAlign","menu","toppings","price","onClick","history","pathname","Input","label","placeholder","onChange","Field","control","key","text","fluid","type","orderDate","Date","day","getDay","month","getMonth","formattedDate","getDate","getFullYear","date","userId","post","headers","Authorization","token","then","response","catch","errorMsg","data","a","Fragment"],"mappings":"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"},"input":"(this[\"webpackJsonphurleymaker\"] = this[\"webpackJsonphurleymaker\"] || []).push([[7],{\n\n/***/ 232:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js + 1 modules\nvar objectSpread2 = __webpack_require__(96);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(20);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/collections/Grid/Grid.js + 2 modules\nvar Grid = __webpack_require__(210);\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Segment/Segment.js + 2 modules\nvar Segment = __webpack_require__(195);\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Header/Header.js + 2 modules\nvar Header = __webpack_require__(104);\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Button/Button.js + 3 modules\nvar Button = __webpack_require__(194);\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/collections/Form/Form.js + 14 modules\nvar Form = __webpack_require__(230);\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/addons/Select/Select.js\nvar Select = __webpack_require__(224);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(10);\n\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/rng.js\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nfunction rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/regex.js\n/* harmony default export */ var regex = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/validate.js\n\n\nfunction validate_validate(uuid) {\n  return typeof uuid === 'string' && regex.test(uuid);\n}\n\n/* harmony default export */ var esm_browser_validate = (validate_validate);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/stringify.js\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var stringify_i = 0; stringify_i < 256; ++stringify_i) {\n  byteToHex.push((stringify_i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0; // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!esm_browser_validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\n/* harmony default export */ var esm_browser_stringify = (stringify);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/v4.js\n\n\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return esm_browser_stringify(rnds);\n}\n\n/* harmony default export */ var esm_browser_v4 = (v4);\n// EXTERNAL MODULE: ./src/axios-orders.js\nvar axios_orders = __webpack_require__(107);\n\n// EXTERNAL MODULE: ./src/context/auth-context.js\nvar auth_context = __webpack_require__(51);\n\n// EXTERNAL MODULE: ./src/components/Order/Checkout/OrderSummary/OrderSummary.js\nvar OrderSummary = __webpack_require__(76);\n\n// EXTERNAL MODULE: ./src/components/Feedback/ErrorModal/ErrorModal.js\nvar ErrorModal = __webpack_require__(108);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/containers/PlaceOrder/PlaceOrder.js\nvar PlaceOrder_PlaceOrder=function PlaceOrder(props){var auth=Object(react[\"useContext\"])(auth_context[\"a\" /* default */]);// CREATE STATES\nvar _useState=Object(react[\"useState\"])({totalPrice:props.location.state.order.totalPrice,chosenStyles:props.location.state.order.chosenStyles}),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),orderState=_useState2[0],setOrderState=_useState2[1];var _useState3=Object(react[\"useState\"])({error:false,errorMessage:null}),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),errorState=_useState4[0],setErrorState=_useState4[1];var _useState5=Object(react[\"useState\"])({details:{name:\"\",phone:\"\",method:\"\",address:\"\"}}),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),customerState=_useState6[0],setCustomerState=_useState6[1];var _useState7=Object(react[\"useState\"])({rules:[{id:\"form-input-name\",message:\"Please enter your name (letters and spaces only, min length 2)\",required:true,valid:false},{id:\"form-input-phone\",message:\"Please enter your phone number (area code and number)\",required:true,valid:false},{id:\"form-input-method\",message:\"Please choose collection or delivery\",required:true,valid:false},{id:\"form-input-address\",message:\"Please enter your delivery address (house number and street)\",required:false,valid:true}],formValid:false}),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),validationState=_useState8[0],setValidationState=_useState8[1];var _useState9=Object(react[\"useState\"])({name:null,phone:null,method:null,address:null}),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),messageState=_useState10[0],setMessageState=_useState10[1];// CANCEL (GO BACK) HANDLER\nvar cancelHandler=function cancelHandler(){props.history.push({pathname:\"/\",state:{order:orderState}});};// VALIDATE FUNCTION\nvar validate=function validate(value,inputIdentifier,inputType){// copy the validation state\nvar validation=Object(objectSpread2[\"a\" /* default */])({},validationState);// find the rule for this input\nvar inputRule=validation.rules.findIndex(function(input){return input.id===inputIdentifier;});var message=null;// check if it is required and also empty (for inputs only)\nif(validation.rules[inputRule].required&&inputType===\"input\"&&value.trim()===\"\"){// get the error message and set valid to false\nmessage=validation.rules[inputRule].message;validation.rules[inputRule].valid=false;}else if(inputIdentifier===\"form-input-phone\"){//check for a valid phone number\nvar pattern=/^[+]?[(]?[0-9]{3,5}[)]?[-\\s.]?[0-9]{6,7}$/;var validNum=pattern.test(value);if(validNum){validation.rules[inputRule].valid=true;}else{validation.rules[inputRule].valid=false;message=validation.rules[inputRule].message;}}else if(inputIdentifier===\"form-input-name\"){//check for a valid name (letters and spaces only)\nvar _pattern=/^[A-Za-z\\s]{2,30}$/;var validName=_pattern.test(value);if(validName){validation.rules[inputRule].valid=true;}else{validation.rules[inputRule].valid=false;message=validation.rules[inputRule].message;}}else if(value===\"Delivery\"){//set address to required\nvalidation.rules[inputRule].valid=true;validation.rules[3].valid=false;validation.rules[3].required=true;}else if(value===\"Collection\"){//set address to not required\nvalidation.rules[inputRule].valid=true;validation.rules[3].required=false;validation.rules[3].valid=true;}else if(validation.rules[inputRule].required&&inputIdentifier===\"form-input-address\"){//check for a valid address (alphanumeric plus some special characters)\nvar _pattern2=/^[#.0-9a-zA-Z\\s,-]{2,50}$/;var validAddress=_pattern2.test(value);if(validAddress){validation.rules[inputRule].valid=true;}else{validation.rules[inputRule].valid=false;message=validation.rules[inputRule].message;}}else{// otherwise reset the message and set valid back to true\nmessage=null;validation.rules[inputRule].valid=true;}var msgState=Object(objectSpread2[\"a\" /* default */])({},messageState);switch(inputIdentifier){case\"form-input-name\":msgState.name=message;break;case\"form-input-phone\":msgState.phone=message;break;case\"form-input-method\":msgState.method=message;break;case\"form-input-address\":msgState.address=message;break;default:// code block\n}setMessageState(Object(objectSpread2[\"a\" /* default */])({},msgState));// check if the whole form is valid\nvar formIsValid=true;for(var i in validation.rules){if(!validation.rules[i].valid){formIsValid=false;}}// update state\nsetValidationState({rules:validation.rules,formValid:formIsValid});};// FORM CHANGED HANDLER\nvar formChangedHandler=function formChangedHandler(event,inputIdentifier,inputType){var customerDetails=customerState.details;switch(inputIdentifier){case\"form-input-name\":customerDetails.name=event.target.value;validate(event.target.value,inputIdentifier,inputType);break;case\"form-input-phone\":customerDetails.phone=event.target.value;validate(event.target.value,inputIdentifier,inputType);break;case\"form-input-method\":customerDetails.method=event.target.textContent;validate(event.target.textContent,inputIdentifier,inputType);break;case\"form-input-address\":customerDetails.address=event.target.value;validate(event.target.value,inputIdentifier,inputType);break;default:// code block\n}setCustomerState({details:customerDetails});};// DISABLE/ENABLE FORM SUBMIT BUTTON\nvar disabled=!validationState.formValid;// CHECKOUT HANDLER\nvar checkoutHandler=function checkoutHandler(){// get order from orderState\nvar order=orderState;// add unique id\norder.id=esm_browser_v4();// create formatted date\nvar orderDate=new Date();var months=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];var days=[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"];var dayNum=orderDate.getDay();var day=days[dayNum];var monthNum=orderDate.getMonth();var month=months[monthNum];var date=orderDate.getDate();var year=orderDate.getFullYear();// saves date in the format \"Fri 19 Mar 2021\"\nvar formattedDate=day+\" \"+date+\" \"+month+\" \"+year;// add formattedDate to order\norder.date=formattedDate;// add customer details to order\norder.details=customerState.details;order.userId=auth.userId;axios_orders[\"a\" /* default */].post(\"/checkout\",order,{headers:{Authorization:\"Bearer \"+auth.token}}).then(function(response){props.history.push(\"/order-success\");}).catch(function(error){var errorMsg=\"\";if(error.response){errorMsg=error.response.data.message;}else{errorMsg=\"There was a problem creating your order\";}setErrorState({error:true,errorMessage:errorMsg});});};// ERROR HANDLER\nvar errorHandler=function errorHandler(){setErrorState({error:false,errorMessage:null});};// DISPLAY ERROR MODAL\nvar orderForm=null;if(errorState.error){orderForm=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ErrorModal[\"a\" /* default */],{error:errorState.errorMessage,onClear:errorHandler});}else{orderForm=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */].Row,{columns:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */].Column,{width:6,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Segment[\"a\" /* default */],{color:\"red\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Header[\"a\" /* default */],{as:\"h2\",textAlign:\"center\",color:\"red\",children:\"Confirm your order:\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(OrderSummary[\"a\" /* default */],{menu:props.location.state.menu,toppings:props.location.state.order.chosenStyles,price:props.location.state.order.totalPrice}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{color:\"red\",onClick:cancelHandler,children:\"Go Back\"})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */].Column,{width:10,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Segment[\"a\" /* default */],{color:\"red\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Header[\"a\" /* default */],{as:\"h2\",textAlign:\"center\",color:\"red\",children:\"Enter your details:\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */],{id:\"form\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Input,{error:messageState.name,required:true,label:\"Name\",placeholder:\"Name\",id:\"form-input-name\",onChange:function onChange(event){return formChangedHandler(event,\"form-input-name\",\"input\");}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Input,{error:messageState.phone,required:true,label:\"Phone\",placeholder:\"Phone e.g. 086-1234567\",id:\"form-input-phone\",onChange:function onChange(event){return formChangedHandler(event,\"form-input-phone\",\"input\");}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Field,{control:Select[\"a\" /* default */],required:true,error:messageState.method,label:\"Delivery method\",options:[{key:\"c\",text:\"Collection\",value:\"collection\"},{key:\"d\",text:\"Delivery\",value:\"delivery\"}],placeholder:\"Collection or Delivery\",id:\"form-input-method\",onChange:function onChange(event){return formChangedHandler(event,\"form-input-method\",\"select\");}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Input,{error:messageState.address,required:validationState.rules[3].required,fluid:true,label:\"Address\",placeholder:\"Address\",id:\"form-input-address\",onChange:function onChange(event){return formChangedHandler(event,\"form-input-address\",\"input\");}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{type:\"submit\",color:\"green\",disabled:disabled,onClick:checkoutHandler,children:\"Submit\"})]})]})})]})});}// DISPLAY ORDER SUMMARY AND FORM\nreturn/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.Fragment,{children:orderForm});};/* harmony default export */ var containers_PlaceOrder_PlaceOrder = __webpack_exports__[\"default\"] = (Object(react_router[\"g\" /* withRouter */])(PlaceOrder_PlaceOrder));\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/node_modules/uuid/dist/esm-browser/rng.js","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/node_modules/uuid/dist/esm-browser/regex.js","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/node_modules/uuid/dist/esm-browser/validate.js","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/node_modules/uuid/dist/esm-browser/stringify.js","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/node_modules/uuid/dist/esm-browser/v4.js","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/PlaceOrder/PlaceOrder.js"],"names":["getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","validate","uuid","REGEX","test","byteToHex","i","push","toString","substr","stringify","arr","offset","arguments","length","undefined","toLowerCase","TypeError","v4","options","buf","rnds","random","PlaceOrder","props","auth","useContext","AuthContext","useState","totalPrice","location","state","order","chosenStyles","orderState","setOrderState","error","errorMessage","errorState","setErrorState","details","name","phone","method","address","customerState","setCustomerState","rules","id","message","required","valid","formValid","validationState","setValidationState","messageState","setMessageState","cancelHandler","history","pathname","value","inputIdentifier","inputType","validation","inputRule","findIndex","input","trim","pattern","validNum","validName","validAddress","msgState","formIsValid","formChangedHandler","event","customerDetails","target","textContent","disabled","checkoutHandler","uuidv4","orderDate","Date","months","days","dayNum","getDay","day","monthNum","getMonth","month","date","getDate","year","getFullYear","formattedDate","userId","axios","post","headers","Authorization","token","then","response","catch","errorMsg","data","errorHandler","orderForm","menu","Select","key","text","withRouter"],"mappings":"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","file":"x","sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import React, { useState, useContext } from \"react\";\r\nimport { Grid, Form, Header, Segment, Select, Button } from \"semantic-ui-react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport axios from \"../../axios-orders\";\r\nimport AuthContext from \"../../context/auth-context\";\r\n\r\nimport OrderSummary from \"../../components/Order/Checkout/OrderSummary/OrderSummary\";\r\nimport ErrorModal from \"../../components/Feedback/ErrorModal/ErrorModal\";\r\n\r\nconst PlaceOrder = (props) => {\r\n\r\n  const auth = useContext(AuthContext);\r\n\r\n  // CREATE STATES\r\n  const [orderState, setOrderState] = useState({\r\n    totalPrice: props.location.state.order.totalPrice,\r\n    chosenStyles: props.location.state.order.chosenStyles,\r\n  });\r\n\r\n  const [errorState, setErrorState] = useState({\r\n    error: false,\r\n    errorMessage: null,\r\n  });\r\n\r\n  const [customerState, setCustomerState] = useState({\r\n    details: {\r\n      name: \"\",\r\n      phone: \"\",\r\n      method: \"\",\r\n      address: \"\",\r\n    },\r\n  });\r\n\r\n  const [validationState, setValidationState] = useState({\r\n    rules: [\r\n      {\r\n        id: \"form-input-name\",\r\n        message:\r\n          \"Please enter your name (letters and spaces only, min length 2)\",\r\n        required: true,\r\n        valid: false,\r\n      },\r\n      {\r\n        id: \"form-input-phone\",\r\n        message: \"Please enter your phone number (area code and number)\",\r\n        required: true,\r\n        valid: false,\r\n      },\r\n      {\r\n        id: \"form-input-method\",\r\n        message: \"Please choose collection or delivery\",\r\n        required: true,\r\n        valid: false,\r\n      },\r\n      {\r\n        id: \"form-input-address\",\r\n        message: \"Please enter your delivery address (house number and street)\",\r\n        required: false,\r\n        valid: true,\r\n      },\r\n    ],\r\n    formValid: false,\r\n  });\r\n\r\n  const [messageState, setMessageState] = useState({\r\n    name: null,\r\n    phone: null,\r\n    method: null,\r\n    address: null,\r\n  });\r\n\r\n  // CANCEL (GO BACK) HANDLER\r\n  const cancelHandler = () => {\r\n    props.history.push({\r\n      pathname: \"/\",\r\n      state: {\r\n        order: orderState,\r\n      },\r\n    });\r\n  };\r\n\r\n  // VALIDATE FUNCTION\r\n  const validate = (value, inputIdentifier, inputType) => {\r\n    // copy the validation state\r\n    const validation = { ...validationState };\r\n\r\n    // find the rule for this input\r\n    const inputRule = validation.rules.findIndex(\r\n      (input) => input.id === inputIdentifier\r\n    );\r\n\r\n    let message = null;\r\n\r\n    // check if it is required and also empty (for inputs only)\r\n    if (\r\n      validation.rules[inputRule].required &&\r\n      inputType === \"input\" &&\r\n      value.trim() === \"\"\r\n    ) {\r\n      // get the error message and set valid to false\r\n      message = validation.rules[inputRule].message;\r\n      validation.rules[inputRule].valid = false;\r\n    } else if (inputIdentifier === \"form-input-phone\") {\r\n      //check for a valid phone number\r\n\r\n      let pattern = /^[+]?[(]?[0-9]{3,5}[)]?[-\\s.]?[0-9]{6,7}$/;\r\n      let validNum = pattern.test(value);\r\n\r\n      if (validNum) {\r\n        validation.rules[inputRule].valid = true;\r\n      } else {\r\n        validation.rules[inputRule].valid = false;\r\n        message = validation.rules[inputRule].message;\r\n      }\r\n    } else if (inputIdentifier === \"form-input-name\") {\r\n      //check for a valid name (letters and spaces only)\r\n\r\n      let pattern = /^[A-Za-z\\s]{2,30}$/;\r\n      let validName = pattern.test(value);\r\n\r\n      if (validName) {\r\n        validation.rules[inputRule].valid = true;\r\n      } else {\r\n        validation.rules[inputRule].valid = false;\r\n        message = validation.rules[inputRule].message;\r\n      }\r\n    } else if (value === \"Delivery\") {\r\n      //set address to required\r\n      validation.rules[inputRule].valid = true;\r\n      validation.rules[3].valid = false;\r\n      validation.rules[3].required = true;\r\n    } else if (value === \"Collection\") {\r\n      //set address to not required\r\n      validation.rules[inputRule].valid = true;\r\n      validation.rules[3].required = false;\r\n      validation.rules[3].valid = true;\r\n    } else if (\r\n      validation.rules[inputRule].required &&\r\n      inputIdentifier === \"form-input-address\"\r\n    ) {\r\n      //check for a valid address (alphanumeric plus some special characters)\r\n\r\n      let pattern = /^[#.0-9a-zA-Z\\s,-]{2,50}$/;\r\n      let validAddress = pattern.test(value);\r\n\r\n      if (validAddress) {\r\n        validation.rules[inputRule].valid = true;\r\n      } else {\r\n        validation.rules[inputRule].valid = false;\r\n        message = validation.rules[inputRule].message;\r\n      }\r\n    } else {\r\n      // otherwise reset the message and set valid back to true\r\n      message = null;\r\n      validation.rules[inputRule].valid = true;\r\n    }\r\n\r\n    let msgState = { ...messageState };\r\n\r\n    switch (inputIdentifier) {\r\n      case \"form-input-name\":\r\n        msgState.name = message;\r\n        break;\r\n      case \"form-input-phone\":\r\n        msgState.phone = message;\r\n        break;\r\n      case \"form-input-method\":\r\n        msgState.method = message;\r\n        break;\r\n      case \"form-input-address\":\r\n        msgState.address = message;\r\n        break;\r\n      default:\r\n      // code block\r\n    }\r\n\r\n    setMessageState({ ...msgState });\r\n\r\n    // check if the whole form is valid\r\n    let formIsValid = true;\r\n\r\n    for (let i in validation.rules) {\r\n      if (!validation.rules[i].valid) {\r\n        formIsValid = false;\r\n      }\r\n    }\r\n\r\n    // update state\r\n    setValidationState({ rules: validation.rules, formValid: formIsValid });\r\n  };\r\n\r\n  // FORM CHANGED HANDLER\r\n  const formChangedHandler = (event, inputIdentifier, inputType) => {\r\n    let customerDetails = customerState.details;\r\n\r\n    switch (inputIdentifier) {\r\n      case \"form-input-name\":\r\n        customerDetails.name = event.target.value;\r\n        validate(event.target.value, inputIdentifier, inputType);\r\n        break;\r\n      case \"form-input-phone\":\r\n        customerDetails.phone = event.target.value;\r\n        validate(event.target.value, inputIdentifier, inputType);\r\n        break;\r\n      case \"form-input-method\":\r\n        customerDetails.method = event.target.textContent;\r\n        validate(event.target.textContent, inputIdentifier, inputType);\r\n        break;\r\n      case \"form-input-address\":\r\n        customerDetails.address = event.target.value;\r\n        validate(event.target.value, inputIdentifier, inputType);\r\n        break;\r\n      default:\r\n      // code block\r\n    }\r\n\r\n    setCustomerState({ details: customerDetails });\r\n  };\r\n\r\n  // DISABLE/ENABLE FORM SUBMIT BUTTON\r\n\r\n  let disabled = !validationState.formValid;\r\n\r\n  // CHECKOUT HANDLER\r\n\r\n  const checkoutHandler = () => {\r\n    // get order from orderState\r\n    let order = orderState;\r\n\r\n    // add unique id\r\n    order.id = uuidv4();\r\n\r\n    // create formatted date\r\n    let orderDate = new Date();\r\n\r\n    const months = [\r\n      \"Jan\",\r\n      \"Feb\",\r\n      \"Mar\",\r\n      \"Apr\",\r\n      \"May\",\r\n      \"Jun\",\r\n      \"Jul\",\r\n      \"Aug\",\r\n      \"Sep\",\r\n      \"Oct\",\r\n      \"Nov\",\r\n      \"Dec\",\r\n    ];\r\n    const days = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n\r\n    let dayNum = orderDate.getDay();\r\n    let day = days[dayNum];\r\n\r\n    let monthNum = orderDate.getMonth();\r\n    let month = months[monthNum];\r\n\r\n    let date = orderDate.getDate();\r\n    let year = orderDate.getFullYear();\r\n\r\n    // saves date in the format \"Fri 19 Mar 2021\"\r\n    let formattedDate = day + \" \" + date + \" \" + month + \" \" + year;\r\n\r\n    // add formattedDate to order\r\n    order.date = formattedDate;\r\n\r\n    // add customer details to order\r\n    order.details = customerState.details;\r\n\r\n    order.userId = auth.userId;\r\n\r\n    axios\r\n      .post(\"/checkout\", order,{\r\n        headers: { Authorization: \"Bearer \" + auth.token}\r\n      })\r\n      .then((response) => {\r\n        props.history.push(\"/order-success\");\r\n      })\r\n      .catch((error) => {\r\n        let errorMsg = \"\";\r\n        if (error.response) {\r\n          errorMsg = error.response.data.message;\r\n        } else {\r\n          errorMsg = \"There was a problem creating your order\";\r\n        }\r\n        setErrorState({ error: true, errorMessage: errorMsg });\r\n      });\r\n  };\r\n\r\n  // ERROR HANDLER\r\n\r\n  const errorHandler = () => {\r\n    setErrorState({\r\n      error: false,\r\n      errorMessage: null,\r\n    });\r\n  };\r\n\r\n  // DISPLAY ERROR MODAL\r\n\r\n  let orderForm = null;\r\n\r\n  if (errorState.error) {\r\n    orderForm = (\r\n      <ErrorModal error={errorState.errorMessage} onClear={errorHandler} />\r\n    );\r\n  } else {\r\n    orderForm = (\r\n      <Grid>\r\n        <Grid.Row columns={2}>\r\n          <Grid.Column width={6}>\r\n            <Segment color=\"red\">\r\n              <Header as=\"h2\" textAlign=\"center\" color=\"red\">\r\n                Confirm your order:\r\n              </Header>\r\n              <OrderSummary\r\n                menu={props.location.state.menu}\r\n                toppings={props.location.state.order.chosenStyles}\r\n                price={props.location.state.order.totalPrice}\r\n              />\r\n              <Button color=\"red\" onClick={cancelHandler}>\r\n                Go Back\r\n              </Button>\r\n            </Segment>\r\n          </Grid.Column>\r\n\r\n          <Grid.Column width={10}>\r\n            <Segment color=\"red\">\r\n              <Header as=\"h2\" textAlign=\"center\" color=\"red\">\r\n                Enter your details:\r\n              </Header>\r\n              <Form id=\"form\">\r\n                <Form.Input\r\n                  error={messageState.name}\r\n                  required\r\n                  label=\"Name\"\r\n                  placeholder=\"Name\"\r\n                  id=\"form-input-name\"\r\n                  onChange={(event) =>\r\n                    formChangedHandler(event, \"form-input-name\", \"input\")\r\n                  }\r\n                />\r\n                <Form.Input\r\n                  error={messageState.phone}\r\n                  required\r\n                  label=\"Phone\"\r\n                  placeholder=\"Phone e.g. 086-1234567\"\r\n                  id=\"form-input-phone\"\r\n                  onChange={(event) =>\r\n                    formChangedHandler(event, \"form-input-phone\", \"input\")\r\n                  }\r\n                />\r\n                <Form.Field\r\n                  control={Select}\r\n                  required\r\n                  error={messageState.method}\r\n                  label=\"Delivery method\"\r\n                  options={[\r\n                    { key: \"c\", text: \"Collection\", value: \"collection\" },\r\n                    { key: \"d\", text: \"Delivery\", value: \"delivery\" },\r\n                  ]}\r\n                  placeholder=\"Collection or Delivery\"\r\n                  id=\"form-input-method\"\r\n                  onChange={(event) =>\r\n                    formChangedHandler(event, \"form-input-method\", \"select\")\r\n                  }\r\n                />\r\n                <Form.Input\r\n                  error={messageState.address}\r\n                  required={validationState.rules[3].required}\r\n                  fluid\r\n                  label=\"Address\"\r\n                  placeholder=\"Address\"\r\n                  id=\"form-input-address\"\r\n                  onChange={(event) =>\r\n                    formChangedHandler(event, \"form-input-address\", \"input\")\r\n                  }\r\n                />\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"green\"\r\n                  disabled={disabled}\r\n                  onClick={checkoutHandler}\r\n                >\r\n                  Submit\r\n                </Button>\r\n              </Form>\r\n            </Segment>\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n    );\r\n  }\r\n\r\n  // DISPLAY ORDER SUMMARY AND FORM\r\n\r\n  return <React.Fragment>{orderForm}</React.Fragment>;\r\n};\r\n\r\nexport default withRouter(PlaceOrder);\r\n"]}}