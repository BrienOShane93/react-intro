[{"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/index.js":"1","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/App.js":"2","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/reportWebVitals.js":"3","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Layout/Layout.js":"4","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Nav/Nav.js":"5","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/YourOrders/YourOrders.js":"6","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/PlaceOrder/PlaceOrder.js":"7","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/PlaceOrder/OrderSuccess/OrderSuccess.js":"8","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/axios-orders.js":"9","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Order/Order.js":"10","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Menu/Menu.js":"11","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/OrdersTable/OrdersTable.js":"12","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Order/Checkout/OrderSummary/OrderSummary.js":"13","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Order/Checkout/Checkout.js":"14","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Menu/MenuItem/MenuItem.js":"15","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/OrdersTable/TableRow/TableRow.js":"16","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Order/Controls/Controls.js":"17","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Order/Checkout/OrderModal/OrderModal.js":"18","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Order/Controls/Control/Control.js":"19","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/HurleyMaker/HurleyMaker.js":"20","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/context/auth-context.js":"21","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/Authenticate/Authenticate.js":"22","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/YourAccount/YourAccount.js":"23","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/YourAccount/AccountUpdate/AccountUpdate.js":"24","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Feedback/ErrorModal/ErrorModal.js":"25","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Feedback/Loader/Loader.js":"26"},{"size":523,"mtime":1617095014000,"results":"27","hashOfConfig":"28"},{"size":276,"mtime":1618942174000,"results":"29","hashOfConfig":"28"},{"size":375,"mtime":1616149836000,"results":"30","hashOfConfig":"28"},{"size":3307,"mtime":1621526566897,"results":"31","hashOfConfig":"28"},{"size":1309,"mtime":1621524782039,"results":"32","hashOfConfig":"28"},{"size":2402,"mtime":1619158856000,"results":"33","hashOfConfig":"28"},{"size":11791,"mtime":1621525547278,"results":"34","hashOfConfig":"28"},{"size":399,"mtime":1619003754000,"results":"35","hashOfConfig":"28"},{"size":136,"mtime":1617808714000,"results":"36","hashOfConfig":"28"},{"size":1299,"mtime":1621525155770,"results":"37","hashOfConfig":"28"},{"size":838,"mtime":1621526341201,"results":"38","hashOfConfig":"28"},{"size":848,"mtime":1621527091972,"results":"39","hashOfConfig":"28"},{"size":1221,"mtime":1621524953074,"results":"40","hashOfConfig":"28"},{"size":813,"mtime":1621527231402,"results":"41","hashOfConfig":"28"},{"size":368,"mtime":1621524592811,"results":"42","hashOfConfig":"28"},{"size":609,"mtime":1621525188483,"results":"43","hashOfConfig":"28"},{"size":682,"mtime":1621527251269,"results":"44","hashOfConfig":"28"},{"size":1158,"mtime":1621524951046,"results":"45","hashOfConfig":"28"},{"size":587,"mtime":1616149836000,"results":"46","hashOfConfig":"28"},{"size":5534,"mtime":1621526562865,"results":"47","hashOfConfig":"28"},{"size":175,"mtime":1619154608000,"results":"48","hashOfConfig":"28"},{"size":11243,"mtime":1619155868000,"results":"49","hashOfConfig":"28"},{"size":6055,"mtime":1621526640014,"results":"50","hashOfConfig":"28"},{"size":8008,"mtime":1619158508000,"results":"51","hashOfConfig":"28"},{"size":774,"mtime":1619003406000,"results":"52","hashOfConfig":"28"},{"size":313,"mtime":1619003414000,"results":"53","hashOfConfig":"28"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},"1fkb3ys",{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"56"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68","usedDeprecatedRules":"56"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71","usedDeprecatedRules":"56"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"98","usedDeprecatedRules":"56"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"103","usedDeprecatedRules":"56"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"106","usedDeprecatedRules":"56"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/index.js",[],["113","114"],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/App.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/reportWebVitals.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Layout/Layout.js",["115"],"import React, { useState, useCallback, useEffect } from \"react\";\r\nimport { Container } from \"semantic-ui-react\";\r\nimport { Route, useHistory, Switch } from \"react-router-dom\";\r\n\r\nimport \"./Layout.css\";\r\n\r\nimport Nav from \"../Nav/Nav\";\r\nimport HurleyMaker from \"../../containers/HurleyMaker/HurleyMaker\";\r\nimport YourOrders from \"../../containers/YourOrders/YourOrders\";\r\nimport PlaceOrder from \"../../containers/PlaceOrder/PlaceOrder\";\r\nimport OrderSuccess from \"../../containers/PlaceOrder/OrderSuccess/OrderSuccess\";\r\nimport Authenticate from \"../../containers/Authenticate/Authenticate\";\r\nimport YourAccount from \"../../containers/YourAccount/YourAccount\";\r\nimport AccountUpdate from \"../../containers/YourAccount/AccountUpdate/AccountUpdate\";\r\nimport AuthContext from \"../../context/auth-context\";\r\n\r\nlet logoutTimer;\r\n\r\nconst Layout = (props) => {\r\n\r\n  const [token, setToken] = useState(false);\r\n  const [userId, setUserId] = useState(false);\r\n  const [tokenExpirationDate, setTokenExpirationDate] = useState();\r\n\r\n  const history = useHistory();\r\n\r\n  const login = useCallback((uid, token, expirationDate) => {\r\n    setToken(token);\r\n    setUserId(uid);\r\n    const tokenExpirationDate = expirationDate || new Date(new Date().getTime() + 1000 * 60 * 60);\r\n    setTokenExpirationDate(tokenExpirationDate);\r\n    localStorage.setItem(\r\n      \"userData\",\r\n      JSON.stringify({\r\n        userId: uid,\r\n        token: token,\r\n        expiration: tokenExpirationDate.toISOString()\r\n      })\r\n    );\r\n  }, []);\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null);\r\n    setTokenExpirationDate(null);\r\n    setUserId(null);\r\n    localStorage.removeItem(\"userData\");\r\n    history.push(\"/\");\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const storedData = JSON.parse(localStorage.getItem(\"userData\"));\r\n    if ( storedData && storedData.token && new Date(storedData.expiration) > new Date() ) {\r\n      login(storedData.userId, storedData.token, new Date(storedData.expiration));\r\n    }\r\n  }, [login]);\r\n\r\n  useEffect(() => {\r\n    if (token && tokenExpirationDate) {\r\n      const remainingTime = tokenExpirationDate.getTime() - new Date().getTime();\r\n      logoutTimer = setTimeout(logout, remainingTime);\r\n    } else {\r\n      clearTimeout(logoutTimer);\r\n    }\r\n  }, [token, logout, tokenExpirationDate]);\r\n\r\n  let routes;\r\n  if (token) {\r\n    routes = (\r\n      <Switch>\r\n        <Route path=\"/\" exact component={HurleyMaker} />\r\n        <Route path=\"/orders/:uid\" component={YourOrders} />\r\n        <Route path=\"/place-order\" component={PlaceOrder} />\r\n        <Route path=\"/order-success\" component={OrderSuccess} />\r\n        <Route path=\"/users/:uid\" component={YourAccount} />\r\n        <Route path=\"/update-account\" component={AccountUpdate} />\r\n      </Switch>\r\n    );\r\n  } else {\r\n    routes = (\r\n      <Switch>\r\n        <Route path=\"/\" exact component={HurleyMaker} />\r\n        <Route path=\"/authenticate\" component={Authenticate} />\r\n      </Switch>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value = {{\r\n        isLoggedIn: !!token,\r\n        token: token,\r\n        userId: userId,\r\n        login: login,\r\n        logout: logout\r\n      }}\r\n    >\r\n      <Container>\r\n        <Nav />\r\n        {routes}\r\n      </Container>\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Nav/Nav.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/YourOrders/YourOrders.js",["116"],"import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"../../axios-orders\";\r\n\r\nimport OrdersTable from \"../../components/OrdersTable/OrdersTable\";\r\nimport Loader from \"../../components/Feedback/Loader/Loader\";\r\nimport ErrorModal from \"../../components/Feedback/ErrorModal/ErrorModal\";\r\nimport AuthContext from \"../../context/auth-context\";\r\n\r\nconst YourOrders = (props) => {\r\n\r\n  const auth = useContext(AuthContext);\r\n\r\n  // ORDER, ERROR AND LOADING STATE\r\n\r\n  const [pastOrdersState, setPastOrdersState] = useState({\r\n    orders: [],\r\n  });\r\n\r\n  const [errorState, setErrorState] = useState({\r\n    error: false,\r\n    errorMessage: null,\r\n  });\r\n\r\n  const [loadingState, setLoadingState] = useState({\r\n    isLoading: true,\r\n    ordersLoaded: false,\r\n    loadFailed: false,\r\n  });\r\n\r\n  // FETCH ORDERS\r\n  \r\n  useEffect(() => {\r\n\r\n    let uid = auth.userId;\r\n    let path = \"/orders/\" + uid;\r\n    axios\r\n      .get(path, { headers: { Authorization: \"Bearer \" + auth.token }})\r\n      .then((response) => {\r\n        setPastOrdersState({ orders: response.data.orders });\r\n        setLoadingState({\r\n          isLoading: false,\r\n          ordersLoaded: true,\r\n          loadFailed: loadingState.loadFailed,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        setErrorState({\r\n          error: true,\r\n          errorMessage: error.response.data.message,\r\n        });\r\n        setLoadingState({\r\n          isLoading: false,\r\n          ordersLoaded: loadingState.ordersLoaded,\r\n          loadFailed: loadingState.loadFailed,\r\n        });\r\n      });\r\n  }, []);\r\n\r\n  // ERROR HANDLER\r\n\r\n  const errorHandler = () => {\r\n    setErrorState({\r\n      error: false,\r\n      errorMessage: null,\r\n    });\r\n    setLoadingState({\r\n      isLoading: loadingState.isLoading,\r\n      ordersLoaded: loadingState.ordersLoaded,\r\n      loadFailed: true,\r\n    });\r\n  };\r\n\r\n  // DISPLAY ORDERS\r\n\r\n  let orders = errorState.error ? (\r\n    <ErrorModal error={errorState.errorMessage} onClear={errorHandler} />\r\n  ) : (\r\n    <Loader active={loadingState.isLoading} />\r\n  );\r\n\r\n  if (loadingState.ordersLoaded && pastOrdersState.orders.length > 0) {\r\n    orders = <OrdersTable orders={pastOrdersState.orders} />;\r\n  } else if (loadingState.loadFailed) {\r\n    orders = <p>We can't load your orders... maybe try creating one?</p>;\r\n  }\r\n\r\n  return <div>{orders}</div>;\r\n};\r\n\r\nexport default YourOrders;\r\n","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/PlaceOrder/PlaceOrder.js",["117"],"import React, { useState, useContext } from \"react\";\r\nimport { Grid, Form, Header, Segment, Select, Button } from \"semantic-ui-react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport axios from \"../../axios-orders\";\r\nimport AuthContext from \"../../context/auth-context\";\r\n\r\nimport OrderSummary from \"../../components/Order/Checkout/OrderSummary/OrderSummary\";\r\nimport ErrorModal from \"../../components/Feedback/ErrorModal/ErrorModal\";\r\n\r\nconst PlaceOrder = (props) => {\r\n\r\n  const auth = useContext(AuthContext);\r\n\r\n  // CREATE STATES\r\n  const [orderState, setOrderState] = useState({\r\n    totalPrice: props.location.state.order.totalPrice,\r\n    chosenStyles: props.location.state.order.chosenStyles,\r\n  });\r\n\r\n  const [errorState, setErrorState] = useState({\r\n    error: false,\r\n    errorMessage: null,\r\n  });\r\n\r\n  const [customerState, setCustomerState] = useState({\r\n    details: {\r\n      name: \"\",\r\n      phone: \"\",\r\n      method: \"\",\r\n      address: \"\",\r\n    },\r\n  });\r\n\r\n  const [validationState, setValidationState] = useState({\r\n    rules: [\r\n      {\r\n        id: \"form-input-name\",\r\n        message:\r\n          \"Please enter your name (letters and spaces only, min length 2)\",\r\n        required: true,\r\n        valid: false,\r\n      },\r\n      {\r\n        id: \"form-input-phone\",\r\n        message: \"Please enter your phone number (area code and number)\",\r\n        required: true,\r\n        valid: false,\r\n      },\r\n      {\r\n        id: \"form-input-method\",\r\n        message: \"Please choose collection or delivery\",\r\n        required: true,\r\n        valid: false,\r\n      },\r\n      {\r\n        id: \"form-input-address\",\r\n        message: \"Please enter your delivery address (house number and street)\",\r\n        required: false,\r\n        valid: true,\r\n      },\r\n    ],\r\n    formValid: false,\r\n  });\r\n\r\n  const [messageState, setMessageState] = useState({\r\n    name: null,\r\n    phone: null,\r\n    method: null,\r\n    address: null,\r\n  });\r\n\r\n  // CANCEL (GO BACK) HANDLER\r\n  const cancelHandler = () => {\r\n    props.history.push({\r\n      pathname: \"/\",\r\n      state: {\r\n        order: orderState,\r\n      },\r\n    });\r\n  };\r\n\r\n  // VALIDATE FUNCTION\r\n  const validate = (value, inputIdentifier, inputType) => {\r\n    // copy the validation state\r\n    const validation = { ...validationState };\r\n\r\n    // find the rule for this input\r\n    const inputRule = validation.rules.findIndex(\r\n      (input) => input.id === inputIdentifier\r\n    );\r\n\r\n    let message = null;\r\n\r\n    // check if it is required and also empty (for inputs only)\r\n    if (\r\n      validation.rules[inputRule].required &&\r\n      inputType === \"input\" &&\r\n      value.trim() === \"\"\r\n    ) {\r\n      // get the error message and set valid to false\r\n      message = validation.rules[inputRule].message;\r\n      validation.rules[inputRule].valid = false;\r\n    } else if (inputIdentifier === \"form-input-phone\") {\r\n      //check for a valid phone number\r\n\r\n      let pattern = /^[+]?[(]?[0-9]{3,5}[)]?[-\\s.]?[0-9]{6,7}$/;\r\n      let validNum = pattern.test(value);\r\n\r\n      if (validNum) {\r\n        validation.rules[inputRule].valid = true;\r\n      } else {\r\n        validation.rules[inputRule].valid = false;\r\n        message = validation.rules[inputRule].message;\r\n      }\r\n    } else if (inputIdentifier === \"form-input-name\") {\r\n      //check for a valid name (letters and spaces only)\r\n\r\n      let pattern = /^[A-Za-z\\s]{2,30}$/;\r\n      let validName = pattern.test(value);\r\n\r\n      if (validName) {\r\n        validation.rules[inputRule].valid = true;\r\n      } else {\r\n        validation.rules[inputRule].valid = false;\r\n        message = validation.rules[inputRule].message;\r\n      }\r\n    } else if (value === \"Delivery\") {\r\n      //set address to required\r\n      validation.rules[inputRule].valid = true;\r\n      validation.rules[3].valid = false;\r\n      validation.rules[3].required = true;\r\n    } else if (value === \"Collection\") {\r\n      //set address to not required\r\n      validation.rules[inputRule].valid = true;\r\n      validation.rules[3].required = false;\r\n      validation.rules[3].valid = true;\r\n    } else if (\r\n      validation.rules[inputRule].required &&\r\n      inputIdentifier === \"form-input-address\"\r\n    ) {\r\n      //check for a valid address (alphanumeric plus some special characters)\r\n\r\n      let pattern = /^[#.0-9a-zA-Z\\s,-]{2,50}$/;\r\n      let validAddress = pattern.test(value);\r\n\r\n      if (validAddress) {\r\n        validation.rules[inputRule].valid = true;\r\n      } else {\r\n        validation.rules[inputRule].valid = false;\r\n        message = validation.rules[inputRule].message;\r\n      }\r\n    } else {\r\n      // otherwise reset the message and set valid back to true\r\n      message = null;\r\n      validation.rules[inputRule].valid = true;\r\n    }\r\n\r\n    let msgState = { ...messageState };\r\n\r\n    switch (inputIdentifier) {\r\n      case \"form-input-name\":\r\n        msgState.name = message;\r\n        break;\r\n      case \"form-input-phone\":\r\n        msgState.phone = message;\r\n        break;\r\n      case \"form-input-method\":\r\n        msgState.method = message;\r\n        break;\r\n      case \"form-input-address\":\r\n        msgState.address = message;\r\n        break;\r\n      default:\r\n      // code block\r\n    }\r\n\r\n    setMessageState({ ...msgState });\r\n\r\n    // check if the whole form is valid\r\n    let formIsValid = true;\r\n\r\n    for (let i in validation.rules) {\r\n      if (!validation.rules[i].valid) {\r\n        formIsValid = false;\r\n      }\r\n    }\r\n\r\n    // update state\r\n    setValidationState({ rules: validation.rules, formValid: formIsValid });\r\n  };\r\n\r\n  // FORM CHANGED HANDLER\r\n  const formChangedHandler = (event, inputIdentifier, inputType) => {\r\n    let customerDetails = customerState.details;\r\n\r\n    switch (inputIdentifier) {\r\n      case \"form-input-name\":\r\n        customerDetails.name = event.target.value;\r\n        validate(event.target.value, inputIdentifier, inputType);\r\n        break;\r\n      case \"form-input-phone\":\r\n        customerDetails.phone = event.target.value;\r\n        validate(event.target.value, inputIdentifier, inputType);\r\n        break;\r\n      case \"form-input-method\":\r\n        customerDetails.method = event.target.textContent;\r\n        validate(event.target.textContent, inputIdentifier, inputType);\r\n        break;\r\n      case \"form-input-address\":\r\n        customerDetails.address = event.target.value;\r\n        validate(event.target.value, inputIdentifier, inputType);\r\n        break;\r\n      default:\r\n      // code block\r\n    }\r\n\r\n    setCustomerState({ details: customerDetails });\r\n  };\r\n\r\n  // DISABLE/ENABLE FORM SUBMIT BUTTON\r\n\r\n  let disabled = !validationState.formValid;\r\n\r\n  // CHECKOUT HANDLER\r\n\r\n  const checkoutHandler = () => {\r\n    // get order from orderState\r\n    let order = orderState;\r\n\r\n    // add unique id\r\n    order.id = uuidv4();\r\n\r\n    // create formatted date\r\n    let orderDate = new Date();\r\n\r\n    const months = [\r\n      \"Jan\",\r\n      \"Feb\",\r\n      \"Mar\",\r\n      \"Apr\",\r\n      \"May\",\r\n      \"Jun\",\r\n      \"Jul\",\r\n      \"Aug\",\r\n      \"Sep\",\r\n      \"Oct\",\r\n      \"Nov\",\r\n      \"Dec\",\r\n    ];\r\n    const days = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n\r\n    let dayNum = orderDate.getDay();\r\n    let day = days[dayNum];\r\n\r\n    let monthNum = orderDate.getMonth();\r\n    let month = months[monthNum];\r\n\r\n    let date = orderDate.getDate();\r\n    let year = orderDate.getFullYear();\r\n\r\n    // saves date in the format \"Fri 19 Mar 2021\"\r\n    let formattedDate = day + \" \" + date + \" \" + month + \" \" + year;\r\n\r\n    // add formattedDate to order\r\n    order.date = formattedDate;\r\n\r\n    // add customer details to order\r\n    order.details = customerState.details;\r\n\r\n    order.userId = auth.userId;\r\n\r\n    axios\r\n      .post(\"/checkout\", order,{\r\n        headers: { Authorization: \"Bearer \" + auth.token}\r\n      })\r\n      .then((response) => {\r\n        props.history.push(\"/order-success\");\r\n      })\r\n      .catch((error) => {\r\n        let errorMsg = \"\";\r\n        if (error.response) {\r\n          errorMsg = error.response.data.message;\r\n        } else {\r\n          errorMsg = \"There was a problem creating your order\";\r\n        }\r\n        setErrorState({ error: true, errorMessage: errorMsg });\r\n      });\r\n  };\r\n\r\n  // ERROR HANDLER\r\n\r\n  const errorHandler = () => {\r\n    setErrorState({\r\n      error: false,\r\n      errorMessage: null,\r\n    });\r\n  };\r\n\r\n  // DISPLAY ERROR MODAL\r\n\r\n  let orderForm = null;\r\n\r\n  if (errorState.error) {\r\n    orderForm = (\r\n      <ErrorModal error={errorState.errorMessage} onClear={errorHandler} />\r\n    );\r\n  } else {\r\n    orderForm = (\r\n      <Grid>\r\n        <Grid.Row columns={2}>\r\n          <Grid.Column width={6}>\r\n            <Segment color=\"red\">\r\n              <Header as=\"h2\" textAlign=\"center\" color=\"red\">\r\n                Confirm your order:\r\n              </Header>\r\n              <OrderSummary\r\n                menu={props.location.state.menu}\r\n                toppings={props.location.state.order.chosenStyles}\r\n                price={props.location.state.order.totalPrice}\r\n              />\r\n              <Button color=\"red\" onClick={cancelHandler}>\r\n                Go Back\r\n              </Button>\r\n            </Segment>\r\n          </Grid.Column>\r\n\r\n          <Grid.Column width={10}>\r\n            <Segment color=\"red\">\r\n              <Header as=\"h2\" textAlign=\"center\" color=\"red\">\r\n                Enter your details:\r\n              </Header>\r\n              <Form id=\"form\">\r\n                <Form.Input\r\n                  error={messageState.name}\r\n                  required\r\n                  label=\"Name\"\r\n                  placeholder=\"Name\"\r\n                  id=\"form-input-name\"\r\n                  onChange={(event) =>\r\n                    formChangedHandler(event, \"form-input-name\", \"input\")\r\n                  }\r\n                />\r\n                <Form.Input\r\n                  error={messageState.phone}\r\n                  required\r\n                  label=\"Phone\"\r\n                  placeholder=\"Phone e.g. 086-1234567\"\r\n                  id=\"form-input-phone\"\r\n                  onChange={(event) =>\r\n                    formChangedHandler(event, \"form-input-phone\", \"input\")\r\n                  }\r\n                />\r\n                <Form.Field\r\n                  control={Select}\r\n                  required\r\n                  error={messageState.method}\r\n                  label=\"Delivery method\"\r\n                  options={[\r\n                    { key: \"c\", text: \"Collection\", value: \"collection\" },\r\n                    { key: \"d\", text: \"Delivery\", value: \"delivery\" },\r\n                  ]}\r\n                  placeholder=\"Collection or Delivery\"\r\n                  id=\"form-input-method\"\r\n                  onChange={(event) =>\r\n                    formChangedHandler(event, \"form-input-method\", \"select\")\r\n                  }\r\n                />\r\n                <Form.Input\r\n                  error={messageState.address}\r\n                  required={validationState.rules[3].required}\r\n                  fluid\r\n                  label=\"Address\"\r\n                  placeholder=\"Address\"\r\n                  id=\"form-input-address\"\r\n                  onChange={(event) =>\r\n                    formChangedHandler(event, \"form-input-address\", \"input\")\r\n                  }\r\n                />\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"green\"\r\n                  disabled={disabled}\r\n                  onClick={checkoutHandler}\r\n                >\r\n                  Submit\r\n                </Button>\r\n              </Form>\r\n            </Segment>\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n    );\r\n  }\r\n\r\n  // DISPLAY ORDER SUMMARY AND FORM\r\n\r\n  return <React.Fragment>{orderForm}</React.Fragment>;\r\n};\r\n\r\nexport default withRouter(PlaceOrder);\r\n","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/PlaceOrder/OrderSuccess/OrderSuccess.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/axios-orders.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Order/Order.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Menu/Menu.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/OrdersTable/OrdersTable.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Order/Checkout/OrderSummary/OrderSummary.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Order/Checkout/Checkout.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Menu/MenuItem/MenuItem.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/OrdersTable/TableRow/TableRow.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Order/Controls/Controls.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Order/Checkout/OrderModal/OrderModal.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Order/Controls/Control/Control.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/HurleyMaker/HurleyMaker.js",["118"],"import React, { useState, useEffect } from \"react\";\r\nimport { Grid } from \"semantic-ui-react\";\r\nimport axios from \"../../axios-orders\";\r\n\r\nimport Menu from \"../../components/Menu/Menu\";\r\nimport Order from \"../../components/Order/Order\";\r\nimport Loader from \"../../components/Feedback/Loader/Loader\";\r\nimport ErrorModal from \"../../components/Feedback/ErrorModal/ErrorModal\";\r\n\r\nconst HurleyMaker = (props) => {\r\n\r\n  // MENU, ERROR AND LOADING STATE AND GET TOPPINGS FROM FIREBASE\r\n  const [menuState, setMenuState] = useState({\r\n    styles: [],\r\n  });\r\n\r\n  const [errorState, setErrorState] = useState({\r\n    error: false,\r\n    errorMessage: null,\r\n  });\r\n\r\n  const [loadingState, setLoadingState] = useState({\r\n    isLoading: true,\r\n    loadFailed: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"/\")\r\n      .then((response) => {\r\n        let sortedStyles = response.data.styles.sort(function (a, b) {\r\n          return a.id - b.id;\r\n        });\r\n        setMenuState({ styles: sortedStyles });\r\n      })\r\n      .catch((error) => {\r\n        setErrorState({\r\n          error: true,\r\n          errorMessage: error.response.data.message,\r\n        });\r\n        setLoadingState({ isLoading: false, loadFailed: menuState.loadFailed });\r\n        console.log(error.response);\r\n      });\r\n  }, []);\r\n\r\n  // ORDER STATE\r\n\r\n  // Set order state conditionally - either to old order state or starting state\r\n\r\n  const [orderState, setOrderState] = useState({\r\n    totalPrice: props.location.state\r\n      ? props.location.state.order.totalPrice\r\n      : 0,\r\n    chosenStyles: props.location.state\r\n      ? props.location.state.order.chosenStyles\r\n      : [],\r\n  });\r\n\r\n  // EVENT HANDLERS - ADD TOPPING\r\n\r\n  const addStyleHandler = (id) => {\r\n    let order = { ...orderState };\r\n\r\n    // find the chosen style in the menu\r\n    const menuIndex = menuState.styles.findIndex(\r\n      (style) => style.id === id\r\n    );\r\n\r\n    // check if the style has already been added to the orderStyles array\r\n    const orderIndex = order.chosenStyles.findIndex(\r\n      (style) => style.id === id\r\n    );\r\n\r\n    // if so, increase its count by 1\r\n    if (orderIndex > -1) {\r\n      order.chosenStyles[orderIndex].count++;\r\n    }\r\n    // otherwise (i.e. this style is being added for the first time)\r\n    // create this style and add it to the order styles array\r\n    else {\r\n      // Save the id, name and price of the chosen style; set its count to 1\r\n      const chosenStyle = {\r\n        id: menuState.styles[menuIndex].id,\r\n        name: menuState.styles[menuIndex].alt,\r\n        price: menuState.styles[menuIndex].price,\r\n        count: 1,\r\n      };\r\n      order.chosenStyles.push(chosenStyle);\r\n    }\r\n\r\n    // Calculate the new price\r\n    const newPrice =\r\n      orderState.totalPrice + menuState.styles[menuIndex].price;\r\n\r\n    // Update the order state with the new price and updated styles array\r\n    setOrderState({\r\n      totalPrice: newPrice,\r\n      chosenStyles: order.chosenStyles,\r\n    });\r\n  };\r\n\r\n  // EVENT HANDLERS - REMOVE STYLE\r\n\r\n  const removeStyleHandler = (id) => {\r\n    let order = { ...orderState };\r\n\r\n    // Find style with matching id from the orderToppings\r\n    const index = order.chosenStyles.findIndex(\r\n      (style) => style.id === id\r\n    );\r\n\r\n    // Get the current price\r\n    let price = order.totalPrice;\r\n\r\n    // If style was found, update the price and decrease the count\r\n    if (index >= 0) {\r\n      price = price - order.chosenStyles[index].price;\r\n      order.chosenStyles[index].count--;\r\n\r\n      // If the count is now 0, remove the style completely\r\n      if (order.chosenStyles[index].count < 1) {\r\n        order.chosenStyles.splice(index, 1);\r\n      }\r\n    }\r\n\r\n    // Update order state with updated price and updated styles array\r\n    setOrderState({\r\n      totalPrice: price,\r\n      chosenStyles: order.chosenStyles,\r\n    });\r\n  };\r\n\r\n  // EVENT HANDLERS - CHECK OUT\r\n\r\n  const checkoutHandler = () => {\r\n    props.history.push({\r\n      pathname: \"place-order\",\r\n      state: {\r\n        order: orderState,\r\n        menu: menuState.styles,\r\n      },\r\n    });\r\n  };\r\n\r\n  // ERROR HANDLER\r\n\r\n  const errorHandler = () => {\r\n    setErrorState({\r\n      error: false,\r\n      errorMessage: null,\r\n    });\r\n    setLoadingState({\r\n      isLoading: false,\r\n      loadFailed: true,\r\n    });\r\n  };\r\n\r\n  // DISABLE CHECKOUT BUTTON IF NO TOPPINGS CHOSEN\r\n\r\n  let checkoutDisabled = true;\r\n\r\n  if (orderState.chosenStyles.length > 0) {\r\n    checkoutDisabled = false;\r\n  }\r\n\r\n  // DISPLAY HURLEY MAKER MENU AND CONTROLS\r\n\r\n  let hurleymakerMenu = errorState.error ? (\r\n    <ErrorModal error={errorState.errorMessage} onClear={errorHandler} />\r\n  ) : (\r\n    <Loader active={loadingState.isLoading} />\r\n  );\r\n\r\n  if (menuState.styles.length > 0) {\r\n    hurleymakerMenu = (\r\n      <Grid divided=\"vertically\" stackable>\r\n        <Grid.Row centered>\r\n          <Menu menu={menuState.styles} />\r\n        </Grid.Row>\r\n        <Order\r\n          menu={menuState.styles}\r\n          styleAdded={addStyleHandler}\r\n          styleRemoved={removeStyleHandler}\r\n          chosenStyles={orderState.chosenStyles}\r\n          totalPrice={orderState.totalPrice}\r\n          checkout={checkoutHandler}\r\n          disabled={checkoutDisabled}\r\n        />\r\n      </Grid>\r\n    );\r\n  } else if (loadingState.loadFailed) {\r\n    hurleymakerMenu = (\r\n      <p>\r\n        We're having some issues loading the menu... Please try again later.\r\n      </p>\r\n    );\r\n  }\r\n\r\n  return <div>{hurleymakerMenu}</div>;\r\n};\r\n\r\nexport default HurleyMaker;\r\n","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/context/auth-context.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/Authenticate/Authenticate.js",["119"],"import React, { useState, useContext } from \"react\";\r\nimport { Grid, Form, Header, Segment, Button } from \"semantic-ui-react\";\r\n\r\nimport ErrorModal from \"../../components/Feedback/ErrorModal/ErrorModal\";\r\nimport AuthContext from \"../../context/auth-context\";\r\nimport axios from '../../axios-orders';\r\n\r\nconst Authenticate = (props) => {\r\n\r\n  const auth = useContext(AuthContext);\r\n\r\n  const [isLoginMode, setIsLoginMode] = useState(false);\r\n\r\n  const [errorState, setErrorState] = useState({\r\n    error: false,\r\n    errorMessage: null,\r\n  });\r\n\r\n  const switchModeHandler = () => {\r\n    setIsLoginMode((prevMode) => !prevMode);\r\n    setAuthDetailsState({\r\n      details: {\r\n        name: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n      },\r\n    });\r\n    setValidationState({\r\n      rules: [\r\n        {\r\n          id: \"form-input-name\",\r\n          message:\r\n            \"Please enter your name (letters and spaces only, min length 2)\",\r\n          required: true,\r\n          valid: false,\r\n        },\r\n        {\r\n          id: \"form-input-email\",\r\n          message:\r\n            \"Please enter a valid email address (something@something.something)\",\r\n          required: true,\r\n          valid: false,\r\n        },\r\n        {\r\n          id: \"form-input-password\",\r\n          message:\r\n            \"Please enter a password (letters and numbers only, min length 6)\",\r\n          required: true,\r\n          valid: false,\r\n        },\r\n      ],\r\n      formValid: false,\r\n    });\r\n    document.getElementById(\"form\").reset();\r\n  };\r\n\r\n  const [authDetailsState, setAuthDetailsState] = useState({\r\n    details: {\r\n      name: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n    },\r\n  });\r\n\r\n  const [validationState, setValidationState] = useState({\r\n    rules: [\r\n      {\r\n        id: \"form-input-name\",\r\n        message:\r\n          \"Please enter your name (letters and spaces only, min length 2)\",\r\n        required: true,\r\n        valid: false,\r\n      },\r\n      {\r\n        id: \"form-input-email\",\r\n        message:\r\n          \"Please enter a valid email address (something@something.something)\",\r\n        required: true,\r\n        valid: false,\r\n      },\r\n      {\r\n        id: \"form-input-password\",\r\n        message:\r\n          \"Please enter a password (letters and numbers only, min length 6)\",\r\n        required: true,\r\n        valid: false,\r\n      },\r\n    ],\r\n    formValid: false,\r\n  });\r\n\r\n  const [messageState, setMessageState] = useState({\r\n    name: null,\r\n    email: null,\r\n    address: null,\r\n  });\r\n\r\n  const validate = (value, inputIdentifier) => {\r\n    // copy the validation state\r\n    const validation = { ...validationState };\r\n\r\n    // find the rule for this input\r\n    const inputRule = validation.rules.findIndex(\r\n      (input) => input.id === inputIdentifier\r\n    );\r\n\r\n    let message = null;\r\n\r\n    // check if it is required and also empty\r\n    if (validation.rules[inputRule].required && value.trim() === \"\") {\r\n      // get the error message and set valid to false\r\n      message = validation.rules[inputRule].message;\r\n      validation.rules[inputRule].valid = false;\r\n    } else if (inputIdentifier === \"form-input-email\") {\r\n      //check for a valid email\r\n\r\n      let pattern = /^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/;\r\n      let validEmail = pattern.test(value);\r\n\r\n      if (validEmail) {\r\n        validation.rules[inputRule].valid = true;\r\n      } else {\r\n        validation.rules[inputRule].valid = false;\r\n        message = validation.rules[inputRule].message;\r\n      }\r\n    } else if (inputIdentifier === \"form-input-password\") {\r\n      //check for a valid password, letters and numbers only, 6 characters min\r\n\r\n      let pattern = /^[A-Za-z0-9\\s]{6,}$/;\r\n      let validPassword = pattern.test(value);\r\n\r\n      if (validPassword) {\r\n        validation.rules[inputRule].valid = true;\r\n      } else {\r\n        validation.rules[inputRule].valid = false;\r\n        message = validation.rules[inputRule].message;\r\n      }\r\n    } else if (\r\n      validation.rules[inputRule].required &&\r\n      inputIdentifier === \"form-input-name\"\r\n    ) {\r\n      //check for a valid name (letters and spaces only)\r\n\r\n      let pattern = /^[A-Za-z\\s]{2,30}$/;\r\n      let validName = pattern.test(value);\r\n\r\n      if (validName) {\r\n        validation.rules[inputRule].valid = true;\r\n      } else {\r\n        validation.rules[inputRule].valid = false;\r\n        message = validation.rules[inputRule].message;\r\n      }\r\n    } else {\r\n      // otherwise reset the message and set valid back to true\r\n      message = null;\r\n      validation.rules[inputRule].valid = true;\r\n    }\r\n\r\n    let msgState = { ...messageState };\r\n\r\n    switch (inputIdentifier) {\r\n      case \"form-input-name\":\r\n        msgState.name = message;\r\n        break;\r\n      case \"form-input-email\":\r\n        msgState.email = message;\r\n        break;\r\n      case \"form-input-password\":\r\n        msgState.password = message;\r\n        break;\r\n      default:\r\n      // code block\r\n    }\r\n\r\n    setMessageState({ ...msgState });\r\n\r\n    // check if the whole form is valid\r\n    let formIsValid = true;\r\n\r\n    for (let i in validation.rules) {\r\n      if (isLoginMode && i == 0) {\r\n        continue;\r\n      }\r\n\r\n      if (!validation.rules[i].valid) {\r\n        formIsValid = false;\r\n      }\r\n    }\r\n\r\n    // update state\r\n    setValidationState({ rules: validation.rules, formValid: formIsValid });\r\n  };\r\n\r\n  const formChangedHandler = (event, inputIdentifier) => {\r\n    let authDetails = authDetailsState.details;\r\n\r\n    switch (inputIdentifier) {\r\n      case \"form-input-name\":\r\n        authDetails.name = event.target.value;\r\n        validate(event.target.value, inputIdentifier);\r\n        break;\r\n      case \"form-input-email\":\r\n        authDetails.email = event.target.value;\r\n        validate(event.target.value, inputIdentifier);\r\n        break;\r\n      case \"form-input-password\":\r\n        let password = event.target.value;\r\n        let trimmedPassword = password.trim();\r\n        authDetails.password = trimmedPassword;\r\n        validate(trimmedPassword, inputIdentifier);\r\n        break;\r\n      default:\r\n      // code block\r\n    }\r\n\r\n    setAuthDetailsState({ details: authDetails });\r\n  };\r\n\r\n  const errorHandler = () => {\r\n    setErrorState({\r\n      error: false,\r\n      errorMessage: null,\r\n    });\r\n  };\r\n\r\n  const signupHandler = () => {\r\n    axios\r\n      .post(\"/signup\", authDetailsState.details)\r\n      .then((response) => {\r\n        auth.login(response.data.userId, response.data.token);\r\n        props.history.push(\"/\");\r\n      })\r\n      .catch((error) => {\r\n        let errorMsg = \"\";\r\n        if (error.response) {\r\n          errorMsg = error.response.data.message;\r\n        } else {\r\n          errorMsg = \"Something went wrong - signup failed\";\r\n        }\r\n        setErrorState({ error: true, errorMessage: errorMsg });\r\n      });\r\n  };\r\n\r\n  const loginHandler = () => {\r\n    axios\r\n      .post(\"/login\", authDetailsState.details)\r\n      .then((response) => {\r\n        auth.login(response.data.userId, response.data.token);\r\n        props.history.push(\"/\");\r\n      })\r\n      .catch((error) => {\r\n        let errorMsg = \"\";\r\n        if (error.response) {\r\n          errorMsg = error.response.data.message;\r\n        } else {\r\n          errorMsg = \"Something went wrong - login failed\";\r\n        }\r\n        setErrorState({ error: true, errorMessage: errorMsg });\r\n      });\r\n  };\r\n\r\n  let disabled = !validationState.formValid;\r\n\r\n  let signupBtnColor = \"grey\";\r\n  let loginBtnColor = \"grey\";\r\n\r\n  let authForm = null;\r\n\r\n  if (errorState.error) {\r\n    authForm = (\r\n      <ErrorModal error={errorState.errorMessage} onClear={errorHandler} />\r\n    );\r\n  } else {\r\n    if (isLoginMode) {\r\n      authForm = (\r\n        <Segment color=\"red\">\r\n          <Header as=\"h2\" textAlign=\"center\" color=\"red\">\r\n            Already registered? Log In!\r\n          </Header>\r\n          <Form id=\"form\">\r\n            <Form.Input\r\n              error={messageState.email}\r\n              autoComplete=\"off\"\r\n              required\r\n              label=\"Email\"\r\n              placeholder=\"Email e.g. username@mail.com\"\r\n              id=\"form-input-email\"\r\n              onChange={(event) =>\r\n                formChangedHandler(event, \"form-input-email\")\r\n              }\r\n            />\r\n            <Form.Input\r\n              error={messageState.password}\r\n              type=\"password\"\r\n              autoComplete=\"off\"\r\n              required\r\n              label=\"Password\"\r\n              placeholder=\"Password\"\r\n              id=\"form-input-password\"\r\n              onChange={(event) =>\r\n                formChangedHandler(event, \"form-input-password\")\r\n              }\r\n            />\r\n            <Button\r\n              type=\"submit\"\r\n              color=\"green\"\r\n              disabled={disabled}\r\n              onClick={loginHandler}\r\n            >\r\n              Log In\r\n            </Button>\r\n          </Form>\r\n        </Segment>\r\n      );\r\n      loginBtnColor = \"red\";\r\n    } else {\r\n      authForm = (\r\n        <Segment color=\"red\">\r\n          <Header as=\"h2\" textAlign=\"center\" color=\"red\">\r\n            First time here? Sign Up!\r\n          </Header>\r\n          <Form id=\"form\">\r\n            <Form.Input\r\n              error={messageState.email}\r\n              autoComplete=\"off\"\r\n              required\r\n              label=\"Email\"\r\n              placeholder=\"Email e.g. username@mail.com\"\r\n              id=\"form-input-email\"\r\n              onChange={(event) =>\r\n                formChangedHandler(event, \"form-input-email\")\r\n              }\r\n            />\r\n            <Form.Input\r\n              error={messageState.password}\r\n              type=\"password\"\r\n              autoComplete=\"off\"\r\n              required\r\n              label=\"Password\"\r\n              placeholder=\"Password\"\r\n              id=\"form-input-password\"\r\n              onChange={(event) =>\r\n                formChangedHandler(event, \"form-input-password\")\r\n              }\r\n            />\r\n            <Form.Input\r\n              error={messageState.name}\r\n              autoComplete=\"off\"\r\n              required\r\n              label=\"Name\"\r\n              placeholder=\"Name\"\r\n              id=\"form-input-name\"\r\n              onChange={(event) => formChangedHandler(event, \"form-input-name\")}\r\n            />\r\n            <Button\r\n              type=\"submit\"\r\n              color=\"green\"\r\n              disabled={disabled}\r\n              onClick={signupHandler}\r\n            >\r\n              Sign Up\r\n            </Button>\r\n          </Form>\r\n        </Segment>\r\n      );\r\n      signupBtnColor = \"red\";\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Grid>\r\n      <Grid.Row centered>\r\n        <Grid.Column width={10}>\r\n          <Button.Group widths=\"2\">\r\n            <Button\r\n              size=\"large\"\r\n              color={signupBtnColor}\r\n              onClick={switchModeHandler}\r\n            >\r\n              Sign Up\r\n            </Button>\r\n            <Button.Or />\r\n            <Button\r\n              size=\"large\"\r\n              color={loginBtnColor}\r\n              onClick={switchModeHandler}\r\n            >\r\n              Log In\r\n            </Button>\r\n          </Button.Group>\r\n          {authForm}\r\n        </Grid.Column>\r\n      </Grid.Row>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default Authenticate;\r\n","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/YourAccount/YourAccount.js",["120"],"import React, { useState, useEffect, useContext } from \"react\";\r\nimport { Grid, Header, Segment, List, Image, Button, Icon, Confirm } from \"semantic-ui-react\";\r\nimport axios from \"../../axios-orders\";\r\n\r\nimport Loader from \"../../components/Feedback/Loader/Loader\";\r\nimport ErrorModal from \"../../components/Feedback/ErrorModal/ErrorModal\";\r\nimport AuthContext from \"../../context/auth-context\";\r\n\r\nconst YourAccount = (props) => {\r\n\r\n  const auth = useContext(AuthContext);\r\n\r\n  // ACCOUNT, ERROR AND LOADING STATE\r\n  const [accountState, setAccountState] = useState({\r\n    user: null,\r\n  });\r\n\r\n  const [errorState, setErrorState] = useState({\r\n    error: false,\r\n    errorMessage: null,\r\n  });\r\n\r\n  const [loadingState, setLoadingState] = useState({\r\n    isLoading: true,\r\n    loadFailed: false,\r\n  });\r\n\r\n  // Manage state of confirm deletion dialog\r\n  const [confirmState, setConfirmState] = useState({ open: false });\r\n  const open = () => setConfirmState({ open: true });\r\n  const close = () => setConfirmState({ open: false });\r\n\r\n  // FETCH ACCOUNT DETAILS\r\n  useEffect(() => {\r\n    let uid = auth.userId; \r\n    let path = \"/users/\" + uid;\r\n    axios\r\n      .get(path, { headers: { Authorization: \"Bearer \" + auth.token } })\r\n      .then((response) => {\r\n        setAccountState({ user: response.data.user });\r\n      })\r\n      .catch((error) => {\r\n        setErrorState({\r\n          error: true,\r\n          errorMessage: error.response.data.message,\r\n        });\r\n        setLoadingState({\r\n          isLoading: false,\r\n          loadFailed: loadingState.loadFailed,\r\n        });\r\n      });\r\n  }, []);\r\n\r\n  // UPDATE AND DELETE HANDLERS\r\n  const updateHandler = () => {\r\n    props.history.push({\r\n      pathname: \"/update-account\",\r\n      state: {\r\n        user: accountState.user,\r\n      },\r\n    });\r\n  };\r\n\r\n  const deleteHandler = () => {\r\n    let uid = auth.userId;\r\n    let path = \"/deleteuser/\" + uid;\r\n    axios\r\n      .delete(path, { headers: { Authorization: \"Bearer \" + auth.token } })\r\n      .then((response) => {\r\n        console.log(\"User deleted!\");\r\n        auth.logout();\r\n        props.history.push(\"/\");\r\n      })\r\n      .catch((error) => {\r\n        let errorMsg = \"\";\r\n        if (error.response) {\r\n          errorMsg = error.response.data.message;\r\n        } else {\r\n          errorMsg = \"There was a problem deleting your account\";\r\n        }\r\n        setErrorState({ error: true, errorMessage: errorMsg });\r\n      });\r\n  };\r\n\r\n  // ERROR HANDLER\r\n  const errorHandler = () => {\r\n    setErrorState({\r\n      error: false,\r\n      errorMessage: null,\r\n    });\r\n    setLoadingState({\r\n      isLoading: false,\r\n      loadFailed: true,\r\n    });\r\n  };\r\n\r\n  // DISPLAY ACCOUNT\r\n  let account = errorState.error ? (\r\n    <ErrorModal error={errorState.errorMessage} onClear={errorHandler} />\r\n  ) : (\r\n    <Loader active={loadingState.isLoading} />\r\n  );\r\n\r\n  if (accountState.user && !errorState.error) {\r\n    account = (\r\n      <Grid>\r\n        <Grid.Row centered>\r\n          <Grid.Column width={10}>\r\n            <Segment color=\"yellow\">\r\n              <Grid divided>\r\n                <Grid.Column width={8}>\r\n                  <Header as=\"h3\" textAlign=\"center\" color=\"blue\">\r\n                    Your Details\r\n                  </Header>\r\n                  <List>\r\n                    <List.Item>\r\n                      <List.Icon name=\"user\" />\r\n                      <List.Content>\r\n                        <b>Name: {accountState.user.name} </b>\r\n                      </List.Content>\r\n                    </List.Item>\r\n                    <List.Item>\r\n                      <List.Icon name=\"mail\" />\r\n                      <List.Content>\r\n                        <b>Email: {accountState.user.email} </b>\r\n                      </List.Content>\r\n                    </List.Item>\r\n                    <List.Item>\r\n                      <List.Icon name=\"lock\" />\r\n                      <List.Content>\r\n                        <b>Password: </b>{\" \"}\r\n                        &#9642;&#9642;&#9642;&#9642;&#9642;&#9642;{\" \"}\r\n                      </List.Content>\r\n                    </List.Item>\r\n                  </List>\r\n                  <div className=\"accountButtons\">\r\n                    <Button\r\n                      icon\r\n                      labelPosition=\"left\"\r\n                      color=\"orange\"\r\n                      onClick={updateHandler}\r\n                    >\r\n                      <Icon name=\"pencil\" />\r\n                      Update Your Details\r\n                    </Button>\r\n                    <br />\r\n                    <br />\r\n                    <Button\r\n                      icon\r\n                      labelPosition=\"left\"\r\n                      color=\"red\"\r\n                      onClick={open}\r\n                    >\r\n                      Delete Your Account\r\n                      <Icon name=\"trash\" />\r\n                    </Button>\r\n                    <Confirm\r\n                      open={confirmState.open}\r\n                      onCancel={close}\r\n                      onConfirm={deleteHandler}\r\n                      header=\"Are you sure?\"\r\n                      content=\"Deleting your account is a permanent action and cannot be undone\"\r\n                      cancelButton=\"Take me back\"\r\n                      confirmButton=\"Yes, delete my account permanently\"\r\n                    />\r\n                  </div>\r\n                </Grid.Column>\r\n                <Grid.Column width={8} textAlign=\"center\">\r\n                  <Image\r\n                    src=\"https://img.jamieoliver.com/jamieoliver/recipe-database/oldImages/large/1474_2_1430128688.jpg?tr=w-800,h-1066\"\r\n                    rounded\r\n                    size=\"large\"\r\n                  />\r\n                </Grid.Column>\r\n              </Grid>\r\n            </Segment>\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n    );\r\n  } else if (loadingState.loadFailed) {\r\n    account = <p>User can't be found</p>;\r\n  }\r\n\r\n  return <React.Fragment>{account}</React.Fragment>;\r\n};\r\n\r\nexport default YourAccount;\r\n","/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/containers/YourAccount/AccountUpdate/AccountUpdate.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Feedback/ErrorModal/ErrorModal.js",[],"/Users/BrienOShane93/Documents/GitHub/react-intro/hurleymaker-assignment2/frontend/src/components/Feedback/Loader/Loader.js",[],{"ruleId":"121","replacedBy":"122"},{"ruleId":"123","replacedBy":"124"},{"ruleId":"125","severity":1,"message":"126","line":48,"column":6,"nodeType":"127","endLine":48,"endColumn":8,"suggestions":"128"},{"ruleId":"125","severity":1,"message":"129","line":57,"column":6,"nodeType":"127","endLine":57,"endColumn":8,"suggestions":"130"},{"ruleId":"131","severity":1,"message":"132","line":16,"column":22,"nodeType":"133","messageId":"134","endLine":16,"endColumn":35},{"ruleId":"125","severity":1,"message":"135","line":44,"column":6,"nodeType":"127","endLine":44,"endColumn":8,"suggestions":"136"},{"ruleId":"137","severity":1,"message":"138","line":181,"column":28,"nodeType":"139","messageId":"140","endLine":181,"endColumn":30},{"ruleId":"125","severity":1,"message":"141","line":52,"column":6,"nodeType":"127","endLine":52,"endColumn":8,"suggestions":"142"},"no-native-reassign",["143"],"no-negated-in-lhs",["144"],"react-hooks/exhaustive-deps","React Hook useCallback has a missing dependency: 'history'. Either include it or remove the dependency array.","ArrayExpression",["145"],"React Hook useEffect has missing dependencies: 'auth.token', 'auth.userId', 'loadingState.loadFailed', and 'loadingState.ordersLoaded'. Either include them or remove the dependency array. You can also replace multiple useState variables with useReducer if 'setLoadingState' needs the current value of 'loadingState.loadFailed'.",["146"],"no-unused-vars","'setOrderState' is assigned a value but never used.","Identifier","unusedVar","React Hook useEffect has a missing dependency: 'menuState.loadFailed'. Either include it or remove the dependency array. You can also replace multiple useState variables with useReducer if 'setLoadingState' needs the current value of 'menuState.loadFailed'.",["147"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","React Hook useEffect has missing dependencies: 'auth.token', 'auth.userId', and 'loadingState.loadFailed'. Either include them or remove the dependency array. You can also replace multiple useState variables with useReducer if 'setLoadingState' needs the current value of 'loadingState.loadFailed'.",["148"],"no-global-assign","no-unsafe-negation",{"desc":"149","fix":"150"},{"desc":"151","fix":"152"},{"desc":"153","fix":"154"},{"desc":"155","fix":"156"},"Update the dependencies array to be: [history]",{"range":"157","text":"158"},"Update the dependencies array to be: [auth.token, auth.userId, loadingState.loadFailed, loadingState.ordersLoaded]",{"range":"159","text":"160"},"Update the dependencies array to be: [menuState.loadFailed]",{"range":"161","text":"162"},"Update the dependencies array to be: [auth.token, auth.userId, loadingState.loadFailed]",{"range":"163","text":"164"},[1700,1702],"[history]",[1583,1585],"[auth.token, auth.userId, loadingState.loadFailed, loadingState.ordersLoaded]",[1299,1301],"[menuState.loadFailed]",[1606,1608],"[auth.token, auth.userId, loadingState.loadFailed]"]