(this.webpackJsonphurleymaker=this.webpackJsonphurleymaker||[]).push([[5],{226:function(e,r,a){"use strict";a.r(r);var s=a(96),t=a(20),n=a(0),i=a(195),l=a(104),o=a(230),u=a(194),d=a(210),m=a(108),c=a(51),p=a(107),f=a(2);r.default=function(e){var r=Object(n.useContext)(c.a),a=Object(n.useState)(!1),g=Object(t.a)(a,2),h=g[0],j=g[1],b=Object(n.useState)({error:!1,errorMessage:null}),O=Object(t.a)(b,2),w=O[0],v=O[1],x=function(){j((function(e){return!e})),q({details:{name:"",email:"",password:""}}),A({rules:[{id:"form-input-name",message:"Please enter your name (letters and spaces only, min length 2)",required:!0,valid:!1},{id:"form-input-email",message:"Please enter a valid email address (something@something.something)",required:!0,valid:!1},{id:"form-input-password",message:"Please enter a password (letters and numbers only, min length 6)",required:!0,valid:!1}],formValid:!1}),document.getElementById("form").reset()},y=Object(n.useState)({details:{name:"",email:"",password:""}}),C=Object(t.a)(y,2),k=C[0],q=C[1],I=Object(n.useState)({rules:[{id:"form-input-name",message:"Please enter your name (letters and spaces only, min length 2)",required:!0,valid:!1},{id:"form-input-email",message:"Please enter a valid email address (something@something.something)",required:!0,valid:!1},{id:"form-input-password",message:"Please enter a password (letters and numbers only, min length 6)",required:!0,valid:!1}],formValid:!1}),P=Object(t.a)(I,2),S=P[0],A=P[1],E=Object(n.useState)({name:null,email:null,address:null}),M=Object(t.a)(E,2),z=M[0],V=M[1],L=function(e,r){var a=Object(s.a)({},S),t=a.rules.findIndex((function(e){return e.id===r})),n=null;if(a.rules[t].required&&""===e.trim())n=a.rules[t].message,a.rules[t].valid=!1;else if("form-input-email"===r){/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(e)?a.rules[t].valid=!0:(a.rules[t].valid=!1,n=a.rules[t].message)}else if("form-input-password"===r){/^[A-Za-z0-9\s]{6,}$/.test(e)?a.rules[t].valid=!0:(a.rules[t].valid=!1,n=a.rules[t].message)}else if(a.rules[t].required&&"form-input-name"===r){/^[A-Za-z\s]{2,30}$/.test(e)?a.rules[t].valid=!0:(a.rules[t].valid=!1,n=a.rules[t].message)}else n=null,a.rules[t].valid=!0;var i=Object(s.a)({},z);switch(r){case"form-input-name":i.name=n;break;case"form-input-email":i.email=n;break;case"form-input-password":i.password=n}V(Object(s.a)({},i));var l=!0;for(var o in a.rules)h&&0==o||a.rules[o].valid||(l=!1);A({rules:a.rules,formValid:l})},U=function(e,r){var a=k.details;switch(r){case"form-input-name":a.name=e.target.value,L(e.target.value,r);break;case"form-input-email":a.email=e.target.value,L(e.target.value,r);break;case"form-input-password":var s=e.target.value.trim();a.password=s,L(s,r)}q({details:a})},$=!S.formValid,J="grey",N="grey",Z=null;return w.error?Z=Object(f.jsx)(m.a,{error:w.errorMessage,onClear:function(){v({error:!1,errorMessage:null})}}):h?(Z=Object(f.jsxs)(i.a,{color:"red",children:[Object(f.jsx)(l.a,{as:"h2",textAlign:"center",color:"red",children:"Already registered? Log In!"}),Object(f.jsxs)(o.a,{id:"form",children:[Object(f.jsx)(o.a.Input,{error:z.email,autoComplete:"off",required:!0,label:"Email",placeholder:"Email e.g. username@mail.com",id:"form-input-email",onChange:function(e){return U(e,"form-input-email")}}),Object(f.jsx)(o.a.Input,{error:z.password,type:"password",autoComplete:"off",required:!0,label:"Password",placeholder:"Password",id:"form-input-password",onChange:function(e){return U(e,"form-input-password")}}),Object(f.jsx)(u.a,{type:"submit",color:"green",disabled:$,onClick:function(){p.a.post("/login",k.details).then((function(a){r.login(a.data.userId,a.data.token),e.history.push("/")})).catch((function(e){var r="";r=e.response?e.response.data.message:"Something went wrong - login failed",v({error:!0,errorMessage:r})}))},children:"Log In"})]})]}),N="red"):(Z=Object(f.jsxs)(i.a,{color:"red",children:[Object(f.jsx)(l.a,{as:"h2",textAlign:"center",color:"red",children:"First time here? Sign Up!"}),Object(f.jsxs)(o.a,{id:"form",children:[Object(f.jsx)(o.a.Input,{error:z.email,autoComplete:"off",required:!0,label:"Email",placeholder:"Email e.g. username@mail.com",id:"form-input-email",onChange:function(e){return U(e,"form-input-email")}}),Object(f.jsx)(o.a.Input,{error:z.password,type:"password",autoComplete:"off",required:!0,label:"Password",placeholder:"Password",id:"form-input-password",onChange:function(e){return U(e,"form-input-password")}}),Object(f.jsx)(o.a.Input,{error:z.name,autoComplete:"off",required:!0,label:"Name",placeholder:"Name",id:"form-input-name",onChange:function(e){return U(e,"form-input-name")}}),Object(f.jsx)(u.a,{type:"submit",color:"green",disabled:$,onClick:function(){p.a.post("/signup",k.details).then((function(a){r.login(a.data.userId,a.data.token),e.history.push("/")})).catch((function(e){var r="";r=e.response?e.response.data.message:"Something went wrong - signup failed",v({error:!0,errorMessage:r})}))},children:"Sign Up"})]})]}),J="red"),Object(f.jsx)(d.a,{children:Object(f.jsx)(d.a.Row,{centered:!0,children:Object(f.jsxs)(d.a.Column,{width:10,children:[Object(f.jsxs)(u.a.Group,{widths:"2",children:[Object(f.jsx)(u.a,{size:"large",color:J,onClick:x,children:"Sign Up"}),Object(f.jsx)(u.a.Or,{}),Object(f.jsx)(u.a,{size:"large",color:N,onClick:x,children:"Log In"})]}),Z]})})})}}}]);
//# sourceMappingURL=5.a5345e81.chunk.js.map